import{y as v,d as b,p as x,o as d,j as n,a as t,f as o,k as m,t as p,w as _,g as c,c as h,b as y,n as k,F as V,r as w,z as U,i as C,q}from"./app-euG18NoH.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dd9PRnpj.js";import{_ as $,a as g}from"./Button-BghtEaoW.js";import{_ as i}from"./Input-C8HeuFM8.js";/* empty css            */const j={class:"px-4 py-6 sm:px-0"},A={class:"mb-8"},B={class:"mt-2 text-sm text-gray-600"},D={class:"font-semibold"},E=["value"],L={key:0,class:"mt-2 text-sm text-red-600"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},S={class:"space-y-4"},F={class:"flex items-start space-x-3 p-4 bg-green-50 rounded-lg border border-green-200"},H={class:"flex items-center h-5"},M={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},G={__name:"Edit",props:{upstream:{type:Object,required:!0},domains:{type:Array,required:!0},errors:{type:Object,default:()=>({})}},setup(l){const s=l,a=v({domain_id:s.upstream.domain_id,name:s.upstream.name,target_url:s.upstream.target_url,weight:s.upstream.weight||100,health_check_path:s.upstream.health_check_path||"/health",health_check_interval:s.upstream.health_check_interval||30,description:s.upstream.description||"",is_active:s.upstream.is_active}),u=b(!1),f=()=>{u.value=!0,q.put(`/upstreams/${s.upstream.id}`,a,{onFinish:()=>u.value=!1})};return(T,e)=>(d(),x(N,null,{default:n(()=>[t("div",j,[t("div",A,[e[10]||(e[10]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Upstream",-1)),t("p",B,[e[8]||(e[8]=m("Update backend server configuration for ",-1)),t("span",D,p(l.upstream.name),1),e[9]||(e[9]=m(".",-1))])]),o($,{class:"max-w-2xl"},{default:n(()=>[t("form",{onSubmit:_(f,["prevent"]),class:"space-y-6"},[t("div",null,[e[12]||(e[12]=t("label",{for:"domain_id",class:"block text-sm font-medium text-gray-700 mb-2"},"Domain",-1)),c(t("select",{id:"domain_id","onUpdate:modelValue":e[0]||(e[0]=r=>a.domain_id=r),required:"",class:k(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors duration-200",{"border-red-300":l.errors.domain_id}])},[e[11]||(e[11]=t("option",{value:""},"Select a domain",-1)),(d(!0),h(V,null,w(l.domains,r=>(d(),h("option",{key:r.id,value:r.id},p(r.name),9,E))),128))],2),[[U,a.domain_id]]),l.errors.domain_id?(d(),h("p",L,p(l.errors.domain_id),1)):y("",!0),e[13]||(e[13]=t("p",{class:"mt-1 text-sm text-gray-500"},"Choose the domain this upstream will serve",-1))]),o(i,{id:"name",modelValue:a.name,"onUpdate:modelValue":e[1]||(e[1]=r=>a.name=r),label:"Upstream Name",type:"text",placeholder:"api-server-1",required:"",error:l.errors.name,help:"A unique identifier for this upstream server"},null,8,["modelValue","error"]),o(i,{id:"target_url",modelValue:a.target_url,"onUpdate:modelValue":e[2]||(e[2]=r=>a.target_url=r),label:"Target URL",type:"url",placeholder:"http://localhost:3000",required:"",error:l.errors.target_url,help:"The backend server URL including protocol and port"},null,8,["modelValue","error"]),t("div",O,[o(i,{id:"weight",modelValue:a.weight,"onUpdate:modelValue":e[3]||(e[3]=r=>a.weight=r),label:"Weight",type:"number",min:"1",max:"100",error:l.errors.weight,help:"Load balancing weight (1-100)"},null,8,["modelValue","error"]),o(i,{id:"health_check_interval",modelValue:a.health_check_interval,"onUpdate:modelValue":e[4]||(e[4]=r=>a.health_check_interval=r),label:"Health Check Interval (seconds)",type:"number",min:"10",max:"3600",error:l.errors.health_check_interval,help:"How often to check server health"},null,8,["modelValue","error"])]),o(i,{id:"health_check_path",modelValue:a.health_check_path,"onUpdate:modelValue":e[5]||(e[5]=r=>a.health_check_path=r),label:"Health Check Path",type:"text",placeholder:"/health",error:l.errors.health_check_path,help:"Optional path for health checks (e.g., /health, /status)"},null,8,["modelValue","error"]),o(i,{id:"description",modelValue:a.description,"onUpdate:modelValue":e[6]||(e[6]=r=>a.description=r),label:"Description",type:"textarea",placeholder:"Optional description for this upstream",error:l.errors.description,help:"Add a description to help identify this upstream's purpose",rows:3},null,8,["modelValue","error"]),t("div",S,[t("div",F,[t("div",H,[c(t("input",{id:"is_active","onUpdate:modelValue":e[7]||(e[7]=r=>a.is_active=r),type:"checkbox",class:"focus:ring-green-500 h-4 w-4 text-green-600 border-gray-300 rounded transition-colors duration-200"},null,512),[[C,a.is_active]])]),e[14]||(e[14]=t("div",{class:"text-sm"},[t("label",{for:"is_active",class:"font-medium text-green-900"},"Active"),t("p",{class:"text-green-700"},"Enable this upstream in the load balancer configuration")],-1))])]),t("div",M,[o(g,{href:"/upstreams",variant:"outline"},{default:n(()=>[...e[15]||(e[15]=[m(" Cancel ",-1)])]),_:1}),o(g,{type:"submit",loading:u.value,variant:"primary"},{default:n(()=>[...e[16]||(e[16]=[m(" Update Upstream ",-1)])]),_:1},8,["loading"])])],32)]),_:1})])]),_:1}))}};export{G as default};
