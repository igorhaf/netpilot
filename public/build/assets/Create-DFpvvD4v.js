import{m as P,d as S,y,p as q,o as a,j as u,a as t,f as c,k as d,w as U,c as l,b as x,g as m,n as g,F as M,r as N,t as n,z as k,v as b,i as _,A as B,q as w}from"./app-euG18NoH.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dd9PRnpj.js";import{a as f,_ as D}from"./Card.vue_vue_type_script_setup_true_lang-DyaH9hgk.js";import{u as A}from"./useToast-C67PMpDe.js";/* empty css            */const E={class:"p-6"},F={class:"mb-8"},z={class:"flex items-center gap-3 mb-4"},H=["value"],L={key:0,class:"mt-2 text-sm text-danger"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$={key:0,class:"mt-2 text-sm text-danger"},I={key:0,class:"mt-2 text-sm text-danger"},Q={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},G={key:0,class:"mt-2 text-sm text-danger"},J={key:0,class:"mt-2 text-sm text-danger"},K={class:"flex flex-col justify-end"},W={class:"flex items-center gap-2"},X={class:"flex items-center gap-2"},Y={key:0,class:"p-4 bg-elevated/50 rounded-lg border border-border"},Z={class:"text-sm text-text-muted space-y-1"},h={class:"flex items-center justify-end gap-3 pt-6 border-t border-border"},de=P({__name:"Create",props:{domains:{}},setup(ee){const{success:C,error:R}=A(),p=S(!1),s=y({}),r=y({domain_id:"",source_pattern:"",target_url:"",redirect_type:301,priority:100,is_active:!0,preserve_query:!0}),v=()=>{w.visit(route("redirects.index"))},T=i=>({301:"301 - Permanente",302:"302 - Temporário",307:"307 - Temporário (mantém método)",308:"308 - Permanente (mantém método)"})[i]||"Desconhecido",V=async()=>{p.value=!0,s.value={};try{await w.post(route("redirects.store"),r,{onSuccess:()=>{C("Regra de redirect criada com sucesso!")},onError:i=>{Object.keys(i).forEach(e=>{s[e]=i[e]}),R("Erro ao criar regra de redirect")},onFinish:()=>{p.value=!1}})}catch(i){i("Erro ao criar regra de redirect"),p.value=!1}};return(i,e)=>(a(),q(j,{title:"Nova Regra de Redirect"},{default:u(()=>[t("div",E,[t("div",F,[t("div",z,[c(f,{onClick:v,variant:"ghost",size:"sm"},{icon:u(()=>[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:u(()=>[e[8]||(e[8]=d(" Voltar ",-1))]),_:1}),e[9]||(e[9]=t("h1",{class:"text-2xl font-bold text-text"},"Nova Regra de Redirect",-1))]),e[10]||(e[10]=t("p",{class:"text-sm text-text-muted"}," Configure uma nova regra de redirecionamento HTTP ",-1))]),c(D,{class:"max-w-4xl"},{default:u(()=>[t("form",{onSubmit:U(V,["prevent"]),class:"p-6 space-y-6"},[t("div",null,[e[12]||(e[12]=t("label",{for:"domain_id",class:"block text-sm font-medium text-text mb-2"},[d(" Domínio "),t("span",{class:"text-danger"},"*")],-1)),m(t("select",{id:"domain_id","onUpdate:modelValue":e[0]||(e[0]=o=>r.domain_id=o),required:"",class:g(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.domain_id}])},[e[11]||(e[11]=t("option",{value:""},"Selecione um domínio",-1)),(a(!0),l(M,null,N(i.domains,o=>(a(),l("option",{key:o.id,value:o.id},n(o.name)+" - "+n(o.description),9,H))),128))],2),[[k,r.domain_id]]),s.domain_id?(a(),l("p",L,n(s.domain_id),1)):x("",!0)]),t("div",O,[t("div",null,[e[13]||(e[13]=t("label",{for:"source_pattern",class:"block text-sm font-medium text-text mb-2"},[d(" Caminho de Origem "),t("span",{class:"text-danger"},"*")],-1)),m(t("input",{id:"source_pattern","onUpdate:modelValue":e[1]||(e[1]=o=>r.source_pattern=o),type:"text",required:"",placeholder:"/old-path",class:g(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.source_pattern}])},null,2),[[b,r.source_pattern]]),e[14]||(e[14]=t("p",{class:"mt-1 text-xs text-text-muted"},"Ex: /old-path, /api/v1/*, /blog/*",-1)),s.source_pattern?(a(),l("p",$,n(s.source_pattern),1)):x("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{for:"target_url",class:"block text-sm font-medium text-text mb-2"},[d(" URL de Destino "),t("span",{class:"text-danger"},"*")],-1)),m(t("input",{id:"target_url","onUpdate:modelValue":e[2]||(e[2]=o=>r.target_url=o),type:"url",required:"",placeholder:"https://exemplo.com/new-path",class:g(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.target_url}])},null,2),[[b,r.target_url]]),e[16]||(e[16]=t("p",{class:"mt-1 text-xs text-text-muted"},"URL completa para onde redirecionar",-1)),s.target_url?(a(),l("p",I,n(s.target_url),1)):x("",!0)])]),t("div",Q,[t("div",null,[e[18]||(e[18]=t("label",{for:"redirect_type",class:"block text-sm font-medium text-text mb-2"},[d(" Tipo de Redirect "),t("span",{class:"text-danger"},"*")],-1)),m(t("select",{id:"redirect_type","onUpdate:modelValue":e[3]||(e[3]=o=>r.redirect_type=o),required:"",class:g(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.redirect_type}])},[...e[17]||(e[17]=[t("option",{value:"301"},"301 - Permanente",-1),t("option",{value:"302"},"302 - Temporário",-1),t("option",{value:"307"},"307 - Temporário (mantém método)",-1),t("option",{value:"308"},"308 - Permanente (mantém método)",-1)])],2),[[k,r.redirect_type]]),s.redirect_type?(a(),l("p",G,n(s.redirect_type),1)):x("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{for:"priority",class:"block text-sm font-medium text-text mb-2"}," Prioridade ",-1)),m(t("input",{id:"priority","onUpdate:modelValue":e[4]||(e[4]=o=>r.priority=o),type:"number",min:"1",max:"1000",placeholder:"100",class:g(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.priority}])},null,2),[[b,r.priority]]),e[20]||(e[20]=t("p",{class:"mt-1 text-xs text-text-muted"},"Menor número = maior prioridade",-1)),s.priority?(a(),l("p",J,n(s.priority),1)):x("",!0)]),t("div",K,[t("label",W,[m(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.preserve_query=o),type:"checkbox",class:"w-4 h-4 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2"},null,512),[[_,r.preserve_query]]),e[21]||(e[21]=t("span",{class:"text-sm font-medium text-text"},"Manter Query Strings",-1))]),e[22]||(e[22]=t("p",{class:"mt-1 text-xs text-text-muted"},"Preservar parâmetros ?param=value",-1))])]),t("div",null,[t("label",X,[m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>r.is_active=o),type:"checkbox",class:"w-4 h-4 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2"},null,512),[[_,r.is_active]]),e[23]||(e[23]=t("span",{class:"text-sm font-medium text-text"},"Ativar regra imediatamente",-1))]),e[24]||(e[24]=t("p",{class:"mt-1 text-xs text-text-muted"},"A regra será aplicada ao Nginx se marcada",-1))]),r.source_pattern&&r.target_url?(a(),l("div",Y,[e[31]||(e[31]=t("h3",{class:"text-sm font-medium text-text mb-2"},"Preview da Regra:",-1)),t("div",Z,[t("p",null,[e[25]||(e[25]=t("strong",null,"Origem:",-1)),d(" "+n(r.source_pattern),1)]),t("p",null,[e[26]||(e[26]=t("strong",null,"Destino:",-1)),d(" "+n(r.target_url),1)]),t("p",null,[e[27]||(e[27]=t("strong",null,"Tipo:",-1)),d(" "+n(T(r.redirect_type)),1)]),t("p",null,[e[28]||(e[28]=t("strong",null,"Prioridade:",-1)),d(" "+n(r.priority),1)]),t("p",null,[e[29]||(e[29]=t("strong",null,"Query Strings:",-1)),d(" "+n(r.preserve_query?"Preservar":"Ignorar"),1)]),t("p",null,[e[30]||(e[30]=t("strong",null,"Status:",-1)),d(" "+n(r.is_active?"Ativa":"Inativa"),1)])])])):x("",!0),t("div",h,[c(f,{onClick:v,type:"button",variant:"ghost"},{default:u(()=>[...e[32]||(e[32]=[d(" Cancelar ",-1)])]),_:1}),c(f,{type:"submit",disabled:p.value,class:"bg-accent hover:bg-accent-light"},B({default:u(()=>[d(" "+n(p.value?"Criando...":"Criar Regra de Redirect"),1)]),_:2},[p.value?{name:"icon",fn:u(()=>[e[33]||(e[33]=t("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1))]),key:"0"}:void 0]),1032,["disabled"])])],32)]),_:1})])]),_:1}))}});export{de as default};
