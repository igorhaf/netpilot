import{y as U,d as T,s as P,p as E,o as d,j as m,a as t,f as l,k as p,t as n,w as q,g as u,c as a,b as c,n as x,F as h,r as _,A as v,i as g,q as A}from"./app-CzLamoS7.js";import{_ as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-ChppVuvQ.js";import{_ as H,a as w}from"./Button-BFAknwbt.js";import{_ as f}from"./Input-qWlr2s8g.js";/* empty css            */const O={class:"px-4 py-6 sm:px-0"},D={class:"mb-8"},C={class:"mt-2 text-sm text-gray-600"},N={class:"font-semibold font-mono"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},R=["value"],$={key:0,class:"mt-2 text-sm text-red-600"},j=["value"],B={key:0,class:"mt-2 text-sm text-red-600"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},F={key:0,class:"mt-2 text-sm text-red-600"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},I={class:"space-y-4"},z={class:"flex items-start space-x-3 p-4 bg-green-50 rounded-lg border border-green-200"},K={class:"flex items-center h-5"},J={class:"flex items-start space-x-3 p-4 bg-blue-50 rounded-lg border border-blue-200"},Q={class:"flex items-center h-5"},W={class:"flex items-start space-x-3 p-4 bg-yellow-50 rounded-lg border border-yellow-200"},X={class:"flex items-center h-5"},Y={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},se={__name:"Edit",props:{route:{type:Object,required:!0},domains:{type:Array,required:!0},upstreams:{type:Array,required:!0},errors:{type:Object,default:()=>({})}},setup(s){const i=s,o=U({domain_id:i.route.domain_id,upstream_id:i.route.upstream_id,path_pattern:i.route.path_pattern,http_method:i.route.http_method,priority:i.route.priority||100,timeout:i.route.timeout||30,description:i.route.description||"",is_active:i.route.is_active,preserve_host:i.route.preserve_host,strip_prefix:i.route.strip_prefix}),b=T(!1),V=P(()=>o.domain_id?i.upstreams.filter(y=>y.domain_id==o.domain_id):i.upstreams),k=()=>{b.value=!0,A.put(`/routes/${i.route.id}`,o,{onFinish:()=>b.value=!1})};return(y,e)=>(d(),E(S,null,{default:m(()=>[t("div",O,[t("div",D,[e[12]||(e[12]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Route",-1)),t("p",C,[e[10]||(e[10]=p("Update routing rule configuration for ",-1)),t("span",N,n(s.route.path_pattern),1),e[11]||(e[11]=p(".",-1))])]),l(H,{class:"max-w-2xl"},{default:m(()=>[t("form",{onSubmit:q(k,["prevent"]),class:"space-y-6"},[t("div",M,[t("div",null,[e[14]||(e[14]=t("label",{for:"domain_id",class:"block text-sm font-medium text-gray-700 mb-2"},"Domain",-1)),u(t("select",{id:"domain_id","onUpdate:modelValue":e[0]||(e[0]=r=>o.domain_id=r),required:"",class:x(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors duration-200",{"border-red-300":s.errors.domain_id}])},[e[13]||(e[13]=t("option",{value:""},"Select a domain",-1)),(d(!0),a(h,null,_(s.domains,r=>(d(),a("option",{key:r.id,value:r.id},n(r.name),9,R))),128))],2),[[v,o.domain_id]]),s.errors.domain_id?(d(),a("p",$,n(s.errors.domain_id),1)):c("",!0)]),t("div",null,[e[16]||(e[16]=t("label",{for:"upstream_id",class:"block text-sm font-medium text-gray-700 mb-2"},"Upstream",-1)),u(t("select",{id:"upstream_id","onUpdate:modelValue":e[1]||(e[1]=r=>o.upstream_id=r),required:"",class:x(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors duration-200",{"border-red-300":s.errors.upstream_id}])},[e[15]||(e[15]=t("option",{value:""},"Select an upstream",-1)),(d(!0),a(h,null,_(V.value,r=>(d(),a("option",{key:r.id,value:r.id},n(r.name),9,j))),128))],2),[[v,o.upstream_id]]),s.errors.upstream_id?(d(),a("p",B,n(s.errors.upstream_id),1)):c("",!0)])]),l(f,{id:"path_pattern",modelValue:o.path_pattern,"onUpdate:modelValue":e[2]||(e[2]=r=>o.path_pattern=r),label:"Path Pattern",type:"text",placeholder:"/api/v1/*",required:"",error:s.errors.path_pattern,help:"URL path pattern to match (supports wildcards like /api/*, /users/{id})"},null,8,["modelValue","error"]),t("div",L,[t("div",null,[e[18]||(e[18]=t("label",{for:"http_method",class:"block text-sm font-medium text-gray-700 mb-2"},"HTTP Method",-1)),u(t("select",{id:"http_method","onUpdate:modelValue":e[3]||(e[3]=r=>o.http_method=r),required:"",class:x(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors duration-200",{"border-red-300":s.errors.http_method}])},[...e[17]||(e[17]=[t("option",{value:"*"},"* (All Methods)",-1),t("option",{value:"GET"},"GET",-1),t("option",{value:"POST"},"POST",-1),t("option",{value:"PUT"},"PUT",-1),t("option",{value:"PATCH"},"PATCH",-1),t("option",{value:"DELETE"},"DELETE",-1),t("option",{value:"HEAD"},"HEAD",-1),t("option",{value:"OPTIONS"},"OPTIONS",-1)])],2),[[v,o.http_method]]),s.errors.http_method?(d(),a("p",F,n(s.errors.http_method),1)):c("",!0)]),l(f,{id:"priority",modelValue:o.priority,"onUpdate:modelValue":e[4]||(e[4]=r=>o.priority=r),label:"Priority",type:"number",min:"1",max:"1000",error:s.errors.priority,help:"Higher numbers = higher priority (1-1000)"},null,8,["modelValue","error"])]),t("div",G,[l(f,{id:"timeout",modelValue:o.timeout,"onUpdate:modelValue":e[5]||(e[5]=r=>o.timeout=r),label:"Timeout (seconds)",type:"number",min:"1",max:"300",error:s.errors.timeout,help:"Request timeout in seconds (1-300)"},null,8,["modelValue","error"])]),l(f,{id:"description",modelValue:o.description,"onUpdate:modelValue":e[6]||(e[6]=r=>o.description=r),label:"Description",type:"textarea",placeholder:"Optional description for this route",error:s.errors.description,help:"Add a description to help identify this route's purpose",rows:3},null,8,["modelValue","error"]),t("div",I,[t("div",z,[t("div",K,[u(t("input",{id:"is_active","onUpdate:modelValue":e[7]||(e[7]=r=>o.is_active=r),type:"checkbox",class:"focus:ring-green-500 h-4 w-4 text-green-600 border-gray-300 rounded transition-colors duration-200"},null,512),[[g,o.is_active]])]),e[19]||(e[19]=t("div",{class:"text-sm"},[t("label",{for:"is_active",class:"font-medium text-green-900"},"Active"),t("p",{class:"text-green-700"},"Enable this route in the proxy configuration")],-1))]),t("div",J,[t("div",Q,[u(t("input",{id:"preserve_host","onUpdate:modelValue":e[8]||(e[8]=r=>o.preserve_host=r),type:"checkbox",class:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded transition-colors duration-200"},null,512),[[g,o.preserve_host]])]),e[20]||(e[20]=t("div",{class:"text-sm"},[t("label",{for:"preserve_host",class:"font-medium text-blue-900"},"Preserve Host Header"),t("p",{class:"text-blue-700"},"Keep the original Host header when forwarding requests")],-1))]),t("div",W,[t("div",X,[u(t("input",{id:"strip_prefix","onUpdate:modelValue":e[9]||(e[9]=r=>o.strip_prefix=r),type:"checkbox",class:"focus:ring-yellow-500 h-4 w-4 text-yellow-600 border-gray-300 rounded transition-colors duration-200"},null,512),[[g,o.strip_prefix]])]),e[21]||(e[21]=t("div",{class:"text-sm"},[t("label",{for:"strip_prefix",class:"font-medium text-yellow-900"},"Strip Path Prefix"),t("p",{class:"text-yellow-700"},"Remove the matched path prefix before forwarding to upstream")],-1))])]),t("div",Y,[l(w,{href:"/routes",variant:"outline"},{default:m(()=>[...e[22]||(e[22]=[p(" Cancel ",-1)])]),_:1}),l(w,{type:"submit",loading:b.value,variant:"primary"},{default:m(()=>[...e[23]||(e[23]=[p(" Update Route ",-1)])]),_:1},8,["loading"])])],32)]),_:1})])]),_:1}))}};export{se as default};
