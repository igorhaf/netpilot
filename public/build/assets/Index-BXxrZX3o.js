import{m as F,d as b,y as H,p as k,o as i,j as a,f as r,a as e,k as g,t as n,g as y,v as P,z as q,c as d,b as h,F as C,r as S,n as w,q as p}from"./app-Cfeasr-S.js";import{_ as U}from"./AppLayout.vue_vue_type_script_setup_true_lang-3KQtrfI4.js";import{_ as G}from"./PageLayout.vue_vue_type_script_setup_true_lang-C64TtZSI.js";import{a as m,_ as f}from"./Card.vue_vue_type_script_setup_true_lang-DrB2_zzy.js";import{_ as I}from"./Pagination.vue_vue_type_script_setup_true_lang-BNiL3V7c.js";import{u as J}from"./useToast-DkDgfNCz.js";/* empty css            */const K={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8"},O={class:"flex items-center gap-3 mt-4 sm:mt-0"},Q={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},W={class:"flex items-center justify-between"},X={class:"text-2xl font-bold text-text"},Y={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold text-success"},ee={class:"flex items-center justify-between"},te={class:"text-2xl font-bold text-warning"},se={class:"flex items-center justify-between"},oe={class:"text-2xl font-bold text-danger"},ae={class:"flex flex-col sm:flex-row gap-4"},re={class:"flex-1"},ne={class:"flex gap-3"},ie={class:"overflow-x-auto"},le={class:"w-full text-sm"},de={key:0,class:"border-b border-border"},ue={class:"px-4 py-3"},ce={class:"font-medium text-text"},pe={class:"text-sm text-text-muted"},xe={class:"px-4 py-3"},me={key:0,class:"space-y-1"},fe={key:0,class:"text-xs text-text-muted"},ve={key:1,class:"text-sm text-text-muted"},ge={class:"px-4 py-3"},_e={class:"px-4 py-3"},he={key:0},we={class:"font-medium text-text"},be={key:1,class:"text-sm text-text-muted"},ke={class:"px-4 py-3"},ye={class:"px-4 py-3 text-center"},Ce={class:"flex items-center gap-2"},Se={class:"px-6 py-4 border-t border-border"},Te=F({__name:"Index",props:{certificates:{},stats:{}},setup(Ee){const{success:_,error:x}=J();b(!1);const v=b(!1),u=H({search:"",status:""}),E=()=>{p.visit("/ssl/create")},j=o=>{p.visit(`/ssl/${o.id}`)},$=async o=>{try{await p.post(`/ssl/${o.id}/renew`,{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{_("Certificado renovado com sucesso!")},onError:()=>{x("Erro ao renovar certificado")}})}catch{x("Erro ao renovar certificado")}},M=async o=>{try{await p.post(`/ssl/${o.id}/toggle`,{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const t=o.auto_renew?"desativada":"ativada";_(`Auto renovação ${t} com sucesso!`)},onError:()=>{x("Erro ao alterar auto renovação")}})}catch{x("Erro ao alterar auto renovação")}},B=o=>{confirm(`Tem certeza que deseja excluir o certificado para "${o.domain_name}"?`)&&p.delete(`/ssl/${o.id}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{_("Certificado excluído com sucesso!")},onError:()=>{x("Erro ao excluir certificado")}})},D=async()=>{v.value=!0;try{await p.post("/ssl/renew-all",{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{_("Renovação em lote iniciada!")},onError:()=>{x("Erro ao iniciar renovação em lote")},onFinish:()=>{v.value=!1}})}catch{x("Erro ao iniciar renovação em lote"),v.value=!1}},A=o=>({valid:"Válido",expiring:"Expirando",expired:"Expirado",failed:"Falha",pending:"Pendente"})[o]||o,L=o=>new Date(o).toLocaleDateString("pt-BR"),T=o=>{const t=new Date,l=new Date(o).getTime()-t.getTime(),c=Math.ceil(l/(1e3*60*60*24));return c<0?`Expirou há ${Math.abs(c)} dias`:c===0?"Expira hoje":c===1?"Expira amanhã":`Expira em ${c} dias`},z=o=>{const t=new Date,l=new Date(o).getTime()-t.getTime(),c=Math.ceil(l/(1e3*60*60*24));return c<0?"text-danger":c<=30?"text-warning":"text-text-muted"},N=()=>{u.search="",u.status="",V()},V=()=>{const o={search:u.search||void 0,status:u.status||void 0};p.get("/ssl",o,{preserveState:!0,preserveScroll:!0})},R=o=>{p.get("/ssl",{page:o},{preserveState:!0,preserveScroll:!0})};return(o,t)=>(i(),k(U,{title:"Certificados SSL"},{default:a(()=>[r(G,null,{default:a(()=>[e("div",K,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-text"},"Certificados SSL"),e("p",{class:"text-sm text-text-muted mt-1"}," Gerencie certificados Let's Encrypt para seus domínios ")],-1)),e("div",O,[r(m,{onClick:D,disabled:v.value,variant:"ghost"},{icon:a(()=>[...t[2]||(t[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])]),default:a(()=>[g(" "+n(v.value?"Renovando...":"Renovar Expirados"),1)]),_:1},8,["disabled"]),r(m,{onClick:E,class:"bg-accent hover:bg-accent-light"},{icon:a(()=>[...t[3]||(t[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:a(()=>[t[4]||(t[4]=g(" Novo Certificado ",-1))]),_:1})])]),e("div",Q,[r(f,{class:"p-4"},{default:a(()=>[e("div",W,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-text-muted"},"Total",-1)),e("p",X,n(o.stats.total),1)]),t[7]||(t[7]=e("div",{class:"p-3 bg-muted/20 rounded-lg"},[e("svg",{class:"w-6 h-6 text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1))])]),_:1}),r(f,{class:"p-4"},{default:a(()=>[e("div",Y,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm text-text-muted"},"Válidos",-1)),e("p",Z,n(o.stats.valid),1)]),t[9]||(t[9]=e("div",{class:"p-3 bg-success/20 rounded-lg"},[e("svg",{class:"w-6 h-6 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4"})])],-1))])]),_:1}),r(f,{class:"p-4"},{default:a(()=>[e("div",ee,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm text-text-muted"},"Expirando",-1)),e("p",te,n(o.stats.expiring),1)]),t[11]||(t[11]=e("div",{class:"p-3 bg-warning/20 rounded-lg"},[e("svg",{class:"w-6 h-6 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1))])]),_:1}),r(f,{class:"p-4"},{default:a(()=>[e("div",se,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm text-text-muted"},"Expirados",-1)),e("p",oe,n(o.stats.expired),1)]),t[13]||(t[13]=e("div",{class:"p-3 bg-danger/20 rounded-lg"},[e("svg",{class:"w-6 h-6 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1))])]),_:1})]),r(f,{class:"p-4 mb-6"},{default:a(()=>[e("div",ae,[e("div",re,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.search=s),type:"text",placeholder:"Buscar por domínio...",class:"w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"},null,512),[[P,u.search]])]),e("div",ne,[y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.status=s),class:"px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"},[...t[14]||(t[14]=[e("option",{value:""},"Todos os status",-1),e("option",{value:"valid"},"Válido",-1),e("option",{value:"expiring"},"Expirando",-1),e("option",{value:"expired"},"Expirado",-1),e("option",{value:"pending"},"Pendente",-1),e("option",{value:"failed"},"Falha",-1)])],512),[[q,u.status]]),r(m,{onClick:N,variant:"ghost"},{default:a(()=>[...t[15]||(t[15]=[g("Limpar",-1)])]),_:1})])])]),_:1}),r(f,null,{default:a(()=>[e("div",ie,[e("table",le,[t[20]||(t[20]=e("thead",{class:"bg-elevated border-b border-border"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"Domínio Principal"),e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"SAN Domains"),e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"Status"),e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"Expira em"),e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"Auto Renovação"),e("th",{class:"px-4 py-3 text-center font-medium text-text-muted"},"Ações")])],-1)),e("tbody",null,[o.certificates.data.length===0?(i(),d("tr",de,[...t[16]||(t[16]=[e("td",{colspan:"6",class:"px-4 py-8 text-center text-text-muted"}," Nenhum certificado SSL encontrado ",-1)])])):h("",!0),(i(!0),d(C,null,S(o.certificates.data,s=>(i(),d("tr",{key:s.id,class:"border-b border-border hover:bg-elevated/50"},[e("td",ue,[e("div",ce,n(s.domain_name),1),e("div",pe,n(s.domain?.name||"N/A"),1)]),e("td",xe,[s.san_domains&&s.san_domains.length?(i(),d("div",me,[(i(!0),d(C,null,S(s.san_domains.slice(0,2),l=>(i(),d("div",{key:l,class:"text-sm text-text-muted"},n(l),1))),128)),s.san_domains.length>2?(i(),d("div",fe," +"+n(s.san_domains.length-2)+" mais ",1)):h("",!0)])):(i(),d("span",ve,"Nenhum"))]),e("td",ge,[e("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-success/20 text-success":s.status==="valid","bg-danger/20 text-danger":s.status==="expired","bg-warning/20 text-warning":s.status==="expiring","bg-info/20 text-info":s.status==="pending","bg-red-500/20 text-red-400":s.status==="failed"}])},n(A(s.status)),3)]),e("td",_e,[s.expires_at?(i(),d("div",he,[e("div",we,n(L(s.expires_at)),1),e("div",{class:w(["text-sm",z(s.expires_at)])},n(T(s.expires_at)),3)])):(i(),d("span",be,"N/A"))]),e("td",ke,[e("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-success/20 text-success":s.auto_renew,"bg-muted/20 text-muted":!s.auto_renew}])},n(s.auto_renew?"Sim":"Não"),3)]),e("td",ye,[e("div",Ce,[s.status==="expiring"||s.status==="expired"?(i(),k(m,{key:0,onClick:l=>$(s),variant:"default",size:"sm"},{default:a(()=>[...t[17]||(t[17]=[g(" Renovar ",-1)])]),_:2},1032,["onClick"])):h("",!0),r(m,{onClick:l=>M(s),variant:s.auto_renew?"outline":"default",size:"sm"},{default:a(()=>[g(n(s.auto_renew?"Desativar Auto":"Ativar Auto"),1)]),_:2},1032,["onClick","variant"]),r(m,{onClick:l=>j(s),variant:"ghost",size:"sm"},{icon:a(()=>[...t[18]||(t[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:2},1032,["onClick"]),r(m,{onClick:l=>B(s),variant:"danger",size:"sm"},{icon:a(()=>[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),_:2},1032,["onClick"])])])]))),128))])])]),e("div",Se,[r(I,{"current-page":o.certificates.current_page,"total-pages":o.certificates.last_page,"total-items":o.certificates.total,"per-page":o.certificates.per_page,onNavigate:R},null,8,["current-page","total-pages","total-items","per-page"])])]),_:1})]),_:1})]),_:1}))}});export{Te as default};
