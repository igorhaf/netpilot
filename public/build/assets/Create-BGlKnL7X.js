import{m as j,d as B,y as w,p as M,o as a,j as r,a as t,f as p,k as i,w as E,c as l,b as c,g as f,n as v,F as y,r as S,t as d,z as U,v as g,i as z,A as F,q as C}from"./app-euG18NoH.js";import{_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dd9PRnpj.js";import{a as b,_ as $}from"./Card.vue_vue_type_script_setup_true_lang-DyaH9hgk.js";import{u as q}from"./useToast-C67PMpDe.js";/* empty css            */const H={class:"p-6"},P={class:"mb-8"},T={class:"flex items-center gap-3 mb-4"},O=["value"],Q={key:0,class:"mt-2 text-sm text-danger"},G={key:0,class:"mt-2 text-sm text-danger"},I={class:"space-y-3"},J=["onUpdate:modelValue"],K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={class:"flex items-center gap-2"},X={key:0,class:"mt-2 text-sm text-danger"},Y={key:0,class:"p-4 bg-elevated/50 rounded-lg border border-border"},Z={class:"text-sm text-text-muted space-y-1"},h={key:0},ee={key:1},te={class:"flex items-center justify-end gap-3 pt-6 border-t border-border"},le=j({__name:"Create",props:{domains:{}},setup(oe){const{success:D,error:N}=q(),u=B(!1),n=w({}),s=w({domain_id:"",domain_name:"",san_domains:[],auto_renew:!0,renewal_days_before:30}),_=()=>{C.visit(route("ssl.index"))},V=()=>{s.san_domains.push({value:""})},A=m=>{s.san_domains.splice(m,1)},L=async()=>{u.value=!0,n.value={};try{const m=s.san_domains.map(o=>o.value).filter(o=>o.trim()!==""),e={...s,san_domains:m.length>0?m:null};await C.post(route("ssl.store"),e,{onSuccess:()=>{D("Certificado SSL solicitado com sucesso!")},onError:o=>{Object.keys(o).forEach(x=>{n[x]=o[x]}),N("Erro ao solicitar certificado SSL")},onFinish:()=>{u.value=!1}})}catch(m){m("Erro ao solicitar certificado SSL"),u.value=!1}};return(m,e)=>(a(),M(R,{title:"Novo Certificado SSL"},{default:r(()=>[t("div",H,[t("div",P,[t("div",T,[p(b,{onClick:_,variant:"ghost",size:"sm"},{icon:r(()=>[...e[4]||(e[4]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:r(()=>[e[5]||(e[5]=i(" Voltar ",-1))]),_:1}),e[6]||(e[6]=t("h1",{class:"text-2xl font-bold text-text"},"Novo Certificado SSL",-1))]),e[7]||(e[7]=t("p",{class:"text-sm text-text-muted"}," Solicite um novo certificado SSL via Let's Encrypt ",-1))]),p($,{class:"max-w-4xl"},{default:r(()=>[t("form",{onSubmit:E(L,["prevent"]),class:"p-6 space-y-6"},[t("div",null,[e[9]||(e[9]=t("label",{for:"domain_id",class:"block text-sm font-medium text-text mb-2"},[i(" Domínio "),t("span",{class:"text-danger"},"*")],-1)),f(t("select",{id:"domain_id","onUpdate:modelValue":e[0]||(e[0]=o=>s.domain_id=o),required:"",class:v(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":n.domain_id}])},[e[8]||(e[8]=t("option",{value:""},"Selecione um domínio",-1)),(a(!0),l(y,null,S(m.domains,o=>(a(),l("option",{key:o.id,value:o.id},d(o.name)+" - "+d(o.description),9,O))),128))],2),[[U,s.domain_id]]),n.domain_id?(a(),l("p",Q,d(n.domain_id),1)):c("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{for:"domain_name",class:"block text-sm font-medium text-text mb-2"},[i(" Nome do Domínio Principal "),t("span",{class:"text-danger"},"*")],-1)),f(t("input",{id:"domain_name","onUpdate:modelValue":e[1]||(e[1]=o=>s.domain_name=o),type:"text",required:"",placeholder:"exemplo.com",class:v(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":n.domain_name}])},null,2),[[g,s.domain_name]]),e[11]||(e[11]=t("p",{class:"mt-1 text-xs text-text-muted"},"Domínio principal para o certificado",-1)),n.domain_name?(a(),l("p",G,d(n.domain_name),1)):c("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-text mb-2"}," Domínios SAN (Subject Alternative Names) ",-1)),t("div",I,[(a(!0),l(y,null,S(s.san_domains,(o,x)=>(a(),l("div",{key:x,class:"flex gap-3"},[f(t("input",{"onUpdate:modelValue":k=>o.value=k,type:"text",placeholder:"www.exemplo.com",class:"flex-1 px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"},null,8,J),[[g,o.value]]),p(b,{onClick:k=>A(x),type:"button",variant:"danger",size:"sm"},{icon:r(()=>[...e[12]||(e[12]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:2},1032,["onClick"])]))),128)),p(b,{onClick:V,type:"button",variant:"outline",size:"sm"},{icon:r(()=>[...e[13]||(e[13]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:r(()=>[e[14]||(e[14]=i(" Adicionar Domínio SAN ",-1))]),_:1})]),e[16]||(e[16]=t("p",{class:"mt-1 text-xs text-text-muted"},"Domínios adicionais incluídos no mesmo certificado",-1))]),t("div",K,[t("div",null,[t("label",W,[f(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.auto_renew=o),type:"checkbox",class:"w-4 h-4 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2"},null,512),[[z,s.auto_renew]]),e[17]||(e[17]=t("span",{class:"text-sm font-medium text-text"},"Renovação Automática",-1))]),e[18]||(e[18]=t("p",{class:"mt-1 text-xs text-text-muted"},"Renovar automaticamente antes da expiração",-1))]),t("div",null,[e[19]||(e[19]=t("label",{for:"renewal_days_before",class:"block text-sm font-medium text-text mb-2"}," Dias Antes da Expiração ",-1)),f(t("input",{id:"renewal_days_before","onUpdate:modelValue":e[3]||(e[3]=o=>s.renewal_days_before=o),type:"number",min:"1",max:"90",placeholder:"30",class:v(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":n.renewal_days_before}])},null,2),[[g,s.renewal_days_before]]),e[20]||(e[20]=t("p",{class:"mt-1 text-xs text-text-muted"},"Quantos dias antes da expiração renovar",-1)),n.renewal_days_before?(a(),l("p",X,d(n.renewal_days_before),1)):c("",!0)])]),s.domain_name?(a(),l("div",Y,[e[25]||(e[25]=t("h3",{class:"text-sm font-medium text-text mb-2"},"Preview do Certificado:",-1)),t("div",Z,[t("p",null,[e[21]||(e[21]=t("strong",null,"Domínio Principal:",-1)),i(" "+d(s.domain_name),1)]),s.san_domains.length>0?(a(),l("p",h,[e[22]||(e[22]=t("strong",null,"Domínios SAN:",-1)),i(" "+d(s.san_domains.map(o=>o.value).filter(o=>o).join(", ")),1)])):c("",!0),t("p",null,[e[23]||(e[23]=t("strong",null,"Renovação Automática:",-1)),i(" "+d(s.auto_renew?"Sim":"Não"),1)]),s.auto_renew?(a(),l("p",ee,[e[24]||(e[24]=t("strong",null,"Renovar:",-1)),i(" "+d(s.renewal_days_before)+" dias antes da expiração ",1)])):c("",!0)])])):c("",!0),t("div",te,[p(b,{onClick:_,type:"button",variant:"ghost"},{default:r(()=>[...e[26]||(e[26]=[i(" Cancelar ",-1)])]),_:1}),p(b,{type:"submit",disabled:u.value,class:"bg-accent hover:bg-accent-light"},F({default:r(()=>[i(" "+d(u.value?"Solicitando...":"Solicitar Certificado SSL"),1)]),_:2},[u.value?{name:"icon",fn:r(()=>[e[27]||(e[27]=t("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1))]),key:"0"}:void 0]),1032,["disabled"])])],32)]),_:1})])]),_:1}))}});export{le as default};
