import{y as f,d as v,p as b,o as i,j as d,a as r,f as o,w as x,g as u,c as m,b as y,n as k,F as _,r as V,t as h,z as w,i as U,k as p,q as C}from"./app-yF2Br3Gr.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-D8-q8WZb.js";import{_ as A,a as c}from"./Button-BmLI4GkH.js";import{_ as s}from"./Input-DrWuFMOo.js";/* empty css            */const N={class:"px-4 py-6 sm:px-0"},B=["value"],D={key:0,class:"mt-2 text-sm text-red-600"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},S={class:"space-y-4"},$={class:"flex items-start space-x-3 p-4 bg-green-50 rounded-lg border border-green-200"},j={class:"flex items-center h-5"},F={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},R={__name:"Create",props:{domains:{type:Array,required:!0},errors:{type:Object,default:()=>({})}},setup(l){const a=f({domain_id:"",name:"",target_url:"",weight:100,health_check_path:"/health",health_check_interval:30,description:"",is_active:!0}),n=v(!1),g=()=>{n.value=!0,C.post("/upstreams",a,{onFinish:()=>n.value=!1})};return(H,e)=>(i(),b(q,null,{default:d(()=>[r("div",N,[e[14]||(e[14]=r("div",{class:"mb-8"},[r("h1",{class:"text-3xl font-bold text-gray-900"},"Add Upstream"),r("p",{class:"mt-2 text-sm text-gray-600"},"Create a new backend server configuration with load balancing and health checks.")],-1)),o(A,{class:"max-w-2xl"},{default:d(()=>[r("form",{onSubmit:x(g,["prevent"]),class:"space-y-6"},[r("div",null,[e[9]||(e[9]=r("label",{for:"domain_id",class:"block text-sm font-medium text-gray-700 mb-2"},"Domain",-1)),u(r("select",{id:"domain_id","onUpdate:modelValue":e[0]||(e[0]=t=>a.domain_id=t),required:"",class:k(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors duration-200",{"border-red-300":l.errors.domain_id}])},[e[8]||(e[8]=r("option",{value:""},"Select a domain",-1)),(i(!0),m(_,null,V(l.domains,t=>(i(),m("option",{key:t.id,value:t.id},h(t.name),9,B))),128))],2),[[w,a.domain_id]]),l.errors.domain_id?(i(),m("p",D,h(l.errors.domain_id),1)):y("",!0),e[10]||(e[10]=r("p",{class:"mt-1 text-sm text-gray-500"},"Choose the domain this upstream will serve",-1))]),o(s,{id:"name",modelValue:a.name,"onUpdate:modelValue":e[1]||(e[1]=t=>a.name=t),label:"Upstream Name",type:"text",placeholder:"api-server-1",required:"",error:l.errors.name,help:"A unique identifier for this upstream server"},null,8,["modelValue","error"]),o(s,{id:"target_url",modelValue:a.target_url,"onUpdate:modelValue":e[2]||(e[2]=t=>a.target_url=t),label:"Target URL",type:"url",placeholder:"http://localhost:3000",required:"",error:l.errors.target_url,help:"The backend server URL including protocol and port"},null,8,["modelValue","error"]),r("div",L,[o(s,{id:"weight",modelValue:a.weight,"onUpdate:modelValue":e[3]||(e[3]=t=>a.weight=t),label:"Weight",type:"number",min:"1",max:"100",error:l.errors.weight,help:"Load balancing weight (1-100)"},null,8,["modelValue","error"]),o(s,{id:"health_check_interval",modelValue:a.health_check_interval,"onUpdate:modelValue":e[4]||(e[4]=t=>a.health_check_interval=t),label:"Health Check Interval (seconds)",type:"number",min:"10",max:"3600",error:l.errors.health_check_interval,help:"How often to check server health"},null,8,["modelValue","error"])]),o(s,{id:"health_check_path",modelValue:a.health_check_path,"onUpdate:modelValue":e[5]||(e[5]=t=>a.health_check_path=t),label:"Health Check Path",type:"text",placeholder:"/health",error:l.errors.health_check_path,help:"Optional path for health checks (e.g., /health, /status)"},null,8,["modelValue","error"]),o(s,{id:"description",modelValue:a.description,"onUpdate:modelValue":e[6]||(e[6]=t=>a.description=t),label:"Description",type:"textarea",placeholder:"Optional description for this upstream",error:l.errors.description,help:"Add a description to help identify this upstream's purpose",rows:3},null,8,["modelValue","error"]),r("div",S,[r("div",$,[r("div",j,[u(r("input",{id:"is_active","onUpdate:modelValue":e[7]||(e[7]=t=>a.is_active=t),type:"checkbox",class:"focus:ring-green-500 h-4 w-4 text-green-600 border-gray-300 rounded transition-colors duration-200"},null,512),[[U,a.is_active]])]),e[11]||(e[11]=r("div",{class:"text-sm"},[r("label",{for:"is_active",class:"font-medium text-green-900"},"Active"),r("p",{class:"text-green-700"},"Enable this upstream in the load balancer configuration")],-1))])]),r("div",F,[o(c,{href:"/upstreams",variant:"outline"},{default:d(()=>[...e[12]||(e[12]=[p(" Cancel ",-1)])]),_:1}),o(c,{type:"submit",loading:n.value,variant:"primary"},{default:d(()=>[...e[13]||(e[13]=[p(" Create Upstream ",-1)])]),_:1},8,["loading"])])],32)]),_:1})])]),_:1}))}};export{R as default};
