import{m as R,d as w,y as F,p as _,o as i,j as r,f as a,a as e,k as v,t as n,g as b,v as H,A as P,c as d,b as g,F as k,r as y,n as h,q as p}from"./app-CzLamoS7.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-ChppVuvQ.js";import{_ as U}from"./PageLayout.vue_vue_type_script_setup_true_lang-Bf6DE4sh.js";import{a as x,_ as m}from"./Card.vue_vue_type_script_setup_true_lang-B9FRhDVo.js";import{_ as G}from"./Pagination.vue_vue_type_script_setup_true_lang-LiS1KAzM.js";import{u as I}from"./useToast-B8XefgZH.js";/* empty css            */const J={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8"},K={class:"flex items-center gap-3 mt-4 sm:mt-0"},O={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Q={class:"flex items-center justify-between"},W={class:"text-2xl font-bold text-text"},X={class:"flex items-center justify-between"},Y={class:"text-2xl font-bold text-success"},Z={class:"flex items-center justify-between"},ee={class:"text-2xl font-bold text-warning"},te={class:"flex items-center justify-between"},se={class:"text-2xl font-bold text-danger"},oe={class:"flex flex-col sm:flex-row gap-4"},re={class:"flex-1"},ae={class:"flex gap-3"},ne={class:"overflow-x-auto"},ie={class:"w-full text-sm"},le={key:0,class:"border-b border-border"},de={class:"px-4 py-3"},ue={class:"font-medium text-text"},ce={class:"text-sm text-text-muted"},pe={class:"px-4 py-3"},xe={key:0,class:"space-y-1"},me={key:0,class:"text-xs text-text-muted"},fe={key:1,class:"text-sm text-text-muted"},ve={class:"px-4 py-3"},ge={class:"px-4 py-3"},he={key:0},we={class:"font-medium text-text"},_e={key:1,class:"text-sm text-text-muted"},be={class:"px-4 py-3"},ke={class:"px-4 py-3 text-center"},ye={class:"flex items-center gap-2"},Ce={class:"px-6 py-4 border-t border-border"},De=R({__name:"Index",props:{certificates:{},stats:{}},setup(Se){const{success:C}=I();w(!1);const f=w(!1),u=F({search:"",status:""}),S=()=>{p.visit("/ssl/create")},E=o=>{p.visit(`/ssl/${o.id}`)},T=async o=>{try{await p.post(`/ssl/${o.id}/renew`,{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{C("Certificado renovado com sucesso!")},onError:()=>{showToast("Erro ao renovar certificado","error")}})}catch{showToast("Erro ao renovar certificado","error")}},j=async o=>{try{await p.post(`/ssl/${o.id}/toggle`,{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const t=o.auto_renew?"desativada":"ativada";showToast(`Auto renovação ${t} com sucesso!`,"success")},onError:()=>{showToast("Erro ao alterar auto renovação","error")}})}catch{showToast("Erro ao alterar auto renovação","error")}},$=o=>{confirm(`Tem certeza que deseja excluir o certificado para "${o.domain_name}"?`)&&p.delete(`/ssl/${o.id}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{showToast("Certificado excluído com sucesso!","success")},onError:()=>{showToast("Erro ao excluir certificado","error")}})},M=async()=>{f.value=!0;try{await p.post("/ssl/renew-all",{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{showToast("Renovação em lote iniciada!","success")},onError:()=>{showToast("Erro ao iniciar renovação em lote","error")},onFinish:()=>{f.value=!1}})}catch{showToast("Erro ao iniciar renovação em lote","error"),f.value=!1}},A=o=>({valid:"Válido",expiring:"Expirando",expired:"Expirado",failed:"Falha",pending:"Pendente"})[o]||o,B=o=>new Date(o).toLocaleDateString("pt-BR"),D=o=>{const t=new Date,l=new Date(o).getTime()-t.getTime(),c=Math.ceil(l/(1e3*60*60*24));return c<0?`Expirou há ${Math.abs(c)} dias`:c===0?"Expira hoje":c===1?"Expira amanhã":`Expira em ${c} dias`},L=o=>{const t=new Date,l=new Date(o).getTime()-t.getTime(),c=Math.ceil(l/(1e3*60*60*24));return c<0?"text-danger":c<=30?"text-warning":"text-text-muted"},N=()=>{u.search="",u.status="",z()},z=()=>{const o={search:u.search||void 0,status:u.status||void 0};p.get("/ssl",o,{preserveState:!0,preserveScroll:!0})},V=o=>{p.get("/ssl",{page:o},{preserveState:!0,preserveScroll:!0})};return(o,t)=>(i(),_(q,{title:"Certificados SSL"},{default:r(()=>[a(U,null,{default:r(()=>[e("div",J,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-text"},"Certificados SSL"),e("p",{class:"text-sm text-text-muted mt-1"}," Gerencie certificados Let's Encrypt para seus domínios ")],-1)),e("div",K,[a(x,{onClick:M,disabled:f.value,variant:"ghost"},{icon:r(()=>[...t[2]||(t[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])]),default:r(()=>[v(" "+n(f.value?"Renovando...":"Renovar Expirados"),1)]),_:1},8,["disabled"]),a(x,{onClick:S,class:"bg-accent hover:bg-accent-light"},{icon:r(()=>[...t[3]||(t[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:r(()=>[t[4]||(t[4]=v(" Novo Certificado ",-1))]),_:1})])]),e("div",O,[a(m,{class:"p-4"},{default:r(()=>[e("div",Q,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-text-muted"},"Total",-1)),e("p",W,n(o.stats.total),1)]),t[7]||(t[7]=e("div",{class:"p-3 bg-muted/20 rounded-lg"},[e("svg",{class:"w-6 h-6 text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1))])]),_:1}),a(m,{class:"p-4"},{default:r(()=>[e("div",X,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm text-text-muted"},"Válidos",-1)),e("p",Y,n(o.stats.valid),1)]),t[9]||(t[9]=e("div",{class:"p-3 bg-success/20 rounded-lg"},[e("svg",{class:"w-6 h-6 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4"})])],-1))])]),_:1}),a(m,{class:"p-4"},{default:r(()=>[e("div",Z,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm text-text-muted"},"Expirando",-1)),e("p",ee,n(o.stats.expiring),1)]),t[11]||(t[11]=e("div",{class:"p-3 bg-warning/20 rounded-lg"},[e("svg",{class:"w-6 h-6 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1))])]),_:1}),a(m,{class:"p-4"},{default:r(()=>[e("div",te,[e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm text-text-muted"},"Expirados",-1)),e("p",se,n(o.stats.expired),1)]),t[13]||(t[13]=e("div",{class:"p-3 bg-danger/20 rounded-lg"},[e("svg",{class:"w-6 h-6 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1))])]),_:1})]),a(m,{class:"p-4 mb-6"},{default:r(()=>[e("div",oe,[e("div",re,[b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.search=s),type:"text",placeholder:"Buscar por domínio...",class:"w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"},null,512),[[H,u.search]])]),e("div",ae,[b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.status=s),class:"px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"},[...t[14]||(t[14]=[e("option",{value:""},"Todos os status",-1),e("option",{value:"valid"},"Válido",-1),e("option",{value:"expiring"},"Expirando",-1),e("option",{value:"expired"},"Expirado",-1),e("option",{value:"pending"},"Pendente",-1),e("option",{value:"failed"},"Falha",-1)])],512),[[P,u.status]]),a(x,{onClick:N,variant:"ghost"},{default:r(()=>[...t[15]||(t[15]=[v("Limpar",-1)])]),_:1})])])]),_:1}),a(m,null,{default:r(()=>[e("div",ne,[e("table",ie,[t[20]||(t[20]=e("thead",{class:"bg-elevated border-b border-border"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"Domínio Principal"),e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"SAN Domains"),e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"Status"),e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"Expira em"),e("th",{class:"px-4 py-3 text-left font-medium text-text-muted"},"Auto Renovação"),e("th",{class:"px-4 py-3 text-center font-medium text-text-muted"},"Ações")])],-1)),e("tbody",null,[o.certificates.data.length===0?(i(),d("tr",le,[...t[16]||(t[16]=[e("td",{colspan:"6",class:"px-4 py-8 text-center text-text-muted"}," Nenhum certificado SSL encontrado ",-1)])])):g("",!0),(i(!0),d(k,null,y(o.certificates.data,s=>(i(),d("tr",{key:s.id,class:"border-b border-border hover:bg-elevated/50"},[e("td",de,[e("div",ue,n(s.domain_name),1),e("div",ce,n(s.domain?.name||"N/A"),1)]),e("td",pe,[s.san_domains&&s.san_domains.length?(i(),d("div",xe,[(i(!0),d(k,null,y(s.san_domains.slice(0,2),l=>(i(),d("div",{key:l,class:"text-sm text-text-muted"},n(l),1))),128)),s.san_domains.length>2?(i(),d("div",me," +"+n(s.san_domains.length-2)+" mais ",1)):g("",!0)])):(i(),d("span",fe,"Nenhum"))]),e("td",ve,[e("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-success/20 text-success":s.status==="valid","bg-danger/20 text-danger":s.status==="expired","bg-warning/20 text-warning":s.status==="expiring","bg-info/20 text-info":s.status==="pending","bg-red-500/20 text-red-400":s.status==="failed"}])},n(A(s.status)),3)]),e("td",ge,[s.expires_at?(i(),d("div",he,[e("div",we,n(B(s.expires_at)),1),e("div",{class:h(["text-sm",L(s.expires_at)])},n(D(s.expires_at)),3)])):(i(),d("span",_e,"N/A"))]),e("td",be,[e("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-success/20 text-success":s.auto_renew,"bg-muted/20 text-muted":!s.auto_renew}])},n(s.auto_renew?"Sim":"Não"),3)]),e("td",ke,[e("div",ye,[s.status==="expiring"||s.status==="expired"?(i(),_(x,{key:0,onClick:l=>T(s),variant:"default",size:"sm"},{default:r(()=>[...t[17]||(t[17]=[v(" Renovar ",-1)])]),_:2},1032,["onClick"])):g("",!0),a(x,{onClick:l=>j(s),variant:s.auto_renew?"outline":"default",size:"sm"},{default:r(()=>[v(n(s.auto_renew?"Desativar Auto":"Ativar Auto"),1)]),_:2},1032,["onClick","variant"]),a(x,{onClick:l=>E(s),variant:"ghost",size:"sm"},{icon:r(()=>[...t[18]||(t[18]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:2},1032,["onClick"]),a(x,{onClick:l=>$(s),variant:"danger",size:"sm"},{icon:r(()=>[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),_:2},1032,["onClick"])])])]))),128))])])]),e("div",Ce,[a(G,{"current-page":o.certificates.current_page,"total-pages":o.certificates.last_page,"total-items":o.certificates.total,"per-page":o.certificates.per_page,onNavigate:V},null,8,["current-page","total-pages","total-items","per-page"])])]),_:1})]),_:1})]),_:1}))}});export{De as default};
