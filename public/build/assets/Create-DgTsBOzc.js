import{m as I,d as g,s as $,e as R,c as i,b as d,o as n,a as e,t as c,n as k,x as U,F as z,r as W,p as H,f as b,j as f,k as _,y as j,w as q,g as x,v as A,i as y,z as L,A as O,q as T}from"./app-euG18NoH.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dd9PRnpj.js";import{a as h,_ as Q}from"./Card.vue_vue_type_script_setup_true_lang-DyaH9hgk.js";import{u as J}from"./useToast-C67PMpDe.js";/* empty css            */const K={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},X={class:"bg-surface rounded-lg shadow-xl max-w-md w-full mx-4"},Y={class:"p-6 border-b border-border"},Z={class:"flex items-center gap-3"},ee={class:"w-8 h-8 bg-accent/10 rounded-full flex items-center justify-center"},te={key:0,class:"w-5 h-5 text-accent animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se={key:1,class:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oe={key:2,class:"w-5 h-5 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ne={key:3,class:"w-5 h-5 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ie={class:"text-sm text-text-muted"},re={class:"p-6"},ae={class:"space-y-4"},le={class:"flex items-center gap-3"},de={class:"flex-1"},ce={class:"flex items-center justify-between mb-2"},ue={class:"w-full bg-elevated rounded-full h-2"},me={class:"space-y-2"},pe={class:"w-4 h-4 flex items-center justify-center"},xe={key:0,class:"w-2 h-2 bg-success rounded-full"},fe={key:1,class:"w-2 h-2 bg-accent rounded-full animate-pulse"},ve={key:2,class:"w-2 h-2 bg-border rounded-full"},ge={key:0,class:"p-3 bg-danger/10 border border-danger/20 rounded-lg"},be={class:"text-sm text-danger"},_e={key:1,class:"p-3 bg-success/10 border border-success/20 rounded-lg"},we={class:"text-sm text-success"},ye={class:"p-6 border-t border-border flex justify-end gap-3"},ke=I({__name:"SslProgressMonitor",props:{domainName:{},certificateId:{},isVisible:{type:Boolean}},emits:["close","retry"],setup(M,{emit:D}){const S=M,m=D,o=g("pending"),v=g(""),w=g(""),s=g([{id:1,text:"Validando domÃ­nio",status:"pending"},{id:2,text:"Gerando chave privada",status:"pending"},{id:3,text:"Solicitando certificado",status:"pending"},{id:4,text:"Instalando certificado",status:"pending"}]),C=$(()=>{switch(o.value){case"pending":return"Aguardando...";case"processing":return"Processando...";case"valid":return"ConcluÃ­do";case"failed":return"Falhou";default:return"Desconhecido"}}),V=$(()=>{switch(o.value){case"processing":return"text-accent";case"valid":return"text-success";case"failed":return"text-danger";default:return"text-text-muted"}}),P=$(()=>{switch(o.value){case"processing":return"bg-accent";case"valid":return"bg-success";case"failed":return"bg-danger";default:return"bg-border"}}),B=$(()=>{const u=s.value.filter(r=>r.status==="completed").length;return o.value==="valid"?100:o.value==="failed"?Math.max(25,u/s.value.length*100):u/s.value.length*100}),l=(u,r)=>{const p=s.value.find(F=>F.id===u);p&&(p.status=r)},t=()=>{o.value="processing",l(1,"processing"),setTimeout(()=>{l(1,"completed"),l(2,"processing"),setTimeout(()=>{l(2,"completed"),l(3,"processing"),setTimeout(()=>{l(3,"completed"),l(4,"processing"),setTimeout(()=>{l(4,"completed"),o.value="valid",w.value=new Date(Date.now()+2160*60*60*1e3).toISOString()},1e3)},1500)},1e3)},1e3)},a=u=>{if(!u)return"";const r=new Date(u);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(r)},N=()=>{m("close")},E=()=>{o.value="pending",v.value="",s.value.forEach(u=>u.status="pending"),m("retry"),t()};return R(()=>{S.isVisible&&setTimeout(()=>{t()},500)}),(u,r)=>u.isVisible?(n(),i("div",K,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[o.value==="processing"?(n(),i("svg",te,[...r[0]||(r[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):o.value==="valid"?(n(),i("svg",se,[...r[1]||(r[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):o.value==="failed"?(n(),i("svg",oe,[...r[2]||(r[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(n(),i("svg",ne,[...r[3]||(r[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"},null,-1)])]))]),e("div",null,[r[4]||(r[4]=e("h3",{class:"text-lg font-medium text-text"},"Certificado SSL",-1)),e("p",ie,c(u.domainName),1)])])]),e("div",re,[e("div",ae,[e("div",le,[e("div",de,[e("div",ce,[r[5]||(r[5]=e("span",{class:"text-sm font-medium text-text"},"Status",-1)),e("span",{class:k(["text-sm",V.value])},c(C.value),3)]),e("div",ue,[e("div",{class:k(["h-2 rounded-full transition-all duration-500",P.value]),style:U({width:B.value+"%"})},null,6)])])]),e("div",me,[(n(!0),i(z,null,W(s.value,p=>(n(),i("div",{key:p.id,class:"flex items-center gap-3 text-sm"},[e("div",pe,[p.status==="completed"?(n(),i("div",xe)):p.status==="processing"?(n(),i("div",fe)):(n(),i("div",ve))]),e("span",{class:k(p.status==="completed"?"text-success":p.status==="processing"?"text-accent":"text-text-muted")},c(p.text),3)]))),128))]),o.value==="failed"&&v.value?(n(),i("div",ge,[e("p",be,c(v.value),1)])):d("",!0),o.value==="valid"?(n(),i("div",_e,[e("p",we," ðŸŽ‰ Certificado SSL criado com sucesso! VÃ¡lido atÃ© "+c(a(w.value)),1)])):d("",!0)])]),e("div",ye,[o.value==="failed"?(n(),H(h,{key:0,onClick:E,variant:"outline"},{default:f(()=>[...r[6]||(r[6]=[_(" Tentar Novamente ",-1)])]),_:1})):d("",!0),b(h,{onClick:N,variant:o.value==="valid"?"default":"ghost"},{default:f(()=>[_(c(o.value==="valid"?"ConcluÃ­do":"Fechar"),1)]),_:1},8,["variant"])])])])):d("",!0)}}),he={class:"space-y-6"},Se={class:"mb-8"},Ce={class:"flex items-center gap-3 mb-4"},$e={key:0,class:"mt-2 text-sm text-danger"},Te={key:0,class:"mt-2 text-sm text-danger"},De={class:"space-y-6"},Ve={class:"space-y-4"},Pe={class:"flex items-start gap-3"},Be={class:"flex items-start gap-3"},Me={class:"space-y-6"},je={class:"space-y-4"},Ae={class:"flex items-start gap-3"},Le={class:"flex items-start gap-3"},Ie={key:0,class:"ml-8"},He={class:"space-y-6"},Ne={class:"space-y-4"},Ee={class:"flex items-start gap-3"},Fe={key:0,class:"ml-8"},Re={key:0,class:"p-4 bg-elevated/50 rounded-lg border border-border"},Ue={class:"space-y-2"},ze={class:"flex items-center gap-2"},We={class:"text-sm font-medium text-text"},qe={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-success/10 text-success"},Oe={key:0,class:"text-sm text-text-muted pl-4"},Ge={class:"flex items-center gap-4 text-xs text-text-muted pl-4"},Qe={key:0},Je={key:1},Ke={class:"flex items-center justify-end gap-3 pt-6 border-t border-border"},st=I({__name:"Create",setup(M){const{success:D,error:S}=J(),m=g(!1),o=j({}),v=g(!1),w=g(),s=j({name:"",description:"",is_active:!0,auto_ssl:!0,force_https:!0,block_external_access:!1,internal_bind_ip:"127.0.0.1",www_redirect:!1,www_redirect_type:"www_to_non_www"}),C=()=>{T.visit("/domains")},V=async()=>{m.value=!0,Object.keys(o).forEach(l=>delete o[l]);try{await T.post("/domains",s,{onSuccess:l=>{D("DomÃ­nio criado com sucesso!"),s.auto_ssl?(v.value=!0,w.value=Math.floor(Math.random()*1e3)):setTimeout(()=>{T.visit("/domains")},1e3)},onError:l=>{Object.keys(l).forEach(t=>{o[t]=l[t]}),S("Erro ao criar domÃ­nio")},onFinish:()=>{m.value=!1}})}catch{S("Erro ao criar domÃ­nio"),m.value=!1}},P=()=>{v.value=!1,setTimeout(()=>{T.visit("/domains")},500)},B=()=>{console.log("Retrying SSL certificate creation for domain:",s.name)};return(l,t)=>(n(),H(G,{title:"Novo DomÃ­nio"},{default:f(()=>[e("div",he,[e("div",Se,[e("div",Ce,[b(h,{onClick:C,variant:"ghost",size:"sm"},{icon:f(()=>[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:f(()=>[t[10]||(t[10]=_(" Voltar ",-1))]),_:1}),t[11]||(t[11]=e("h1",{class:"text-2xl font-bold text-text"},"Novo DomÃ­nio",-1))]),t[12]||(t[12]=e("p",{class:"text-sm text-text-muted"}," Adicione um domÃ­nio para gerenciar redirects e certificados SSL automÃ¡ticos ",-1))]),b(Q,{class:"w-full"},{default:f(()=>[e("form",{onSubmit:q(V,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[t[13]||(t[13]=e("label",{for:"name",class:"block text-sm font-medium text-text mb-2"},[_(" Nome do DomÃ­nio "),e("span",{class:"text-danger"},"*")],-1)),x(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=a=>s.name=a),type:"text",required:"",placeholder:"exemplo.com",class:k(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":o.name}])},null,2),[[A,s.name]]),t[14]||(t[14]=e("p",{class:"mt-1 text-xs text-text-muted"},"Nome do domÃ­nio (ex: exemplo.com, www.exemplo.com)",-1)),o.name?(n(),i("p",$e,c(o.name),1)):d("",!0)]),e("div",null,[t[15]||(t[15]=e("label",{for:"description",class:"block text-sm font-medium text-text mb-2"}," DescriÃ§Ã£o ",-1)),x(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=a=>s.description=a),rows:"3",placeholder:"DescriÃ§Ã£o do domÃ­nio e sua finalidade...",class:k(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":o.description}])},null,2),[[A,s.description]]),t[16]||(t[16]=e("p",{class:"mt-1 text-xs text-text-muted"},"DescriÃ§Ã£o opcional para identificar o domÃ­nio",-1)),o.description?(n(),i("p",Te,c(o.description),1)):d("",!0)]),e("div",De,[e("div",null,[t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-text mb-4"},"ConfiguraÃ§Ãµes BÃ¡sicas",-1)),e("div",Ve,[e("div",Pe,[x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.is_active=a),id:"is_active",type:"checkbox",class:"w-5 h-5 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2 mt-0.5"},null,512),[[y,s.is_active]]),t[17]||(t[17]=e("div",null,[e("label",{for:"is_active",class:"text-sm font-medium text-text cursor-pointer"}," Ativar DomÃ­nio "),e("p",{class:"text-xs text-text-muted mt-1"}," Quando ativo, o domÃ­nio ficarÃ¡ disponÃ­vel para receber trÃ¡fego e configurar redirects ")],-1))]),e("div",Be,[x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.auto_ssl=a),id:"auto_ssl",type:"checkbox",class:"w-5 h-5 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2 mt-0.5"},null,512),[[y,s.auto_ssl]]),t[18]||(t[18]=e("div",null,[e("label",{for:"auto_ssl",class:"text-sm font-medium text-text cursor-pointer"}," SSL AutomÃ¡tico (Let's Encrypt) "),e("p",{class:"text-xs text-text-muted mt-1"}," Gerar e renovar automaticamente certificados SSL gratuitos via Let's Encrypt ")],-1))])])])]),e("div",Me,[e("div",null,[t[25]||(t[25]=e("h3",{class:"text-lg font-medium text-text mb-4"},"ConfiguraÃ§Ãµes de SeguranÃ§a",-1)),e("div",je,[e("div",Ae,[x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.force_https=a),id:"force_https",type:"checkbox",class:"w-5 h-5 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2 mt-0.5"},null,512),[[y,s.force_https]]),t[20]||(t[20]=e("div",null,[e("label",{for:"force_https",class:"text-sm font-medium text-text cursor-pointer"}," ForÃ§ar HTTPS (Redirecionamento HTTP â†’ HTTPS) "),e("p",{class:"text-xs text-text-muted mt-1"}," Redireciona automaticamente todo trÃ¡fego HTTP para HTTPS (recomendado) ")],-1))]),e("div",Le,[x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.block_external_access=a),id:"block_external_access",type:"checkbox",class:"w-5 h-5 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2 mt-0.5"},null,512),[[y,s.block_external_access]]),t[21]||(t[21]=e("div",null,[e("label",{for:"block_external_access",class:"text-sm font-medium text-text cursor-pointer"}," Bloquear Acesso Externo Direto "),e("p",{class:"text-xs text-text-muted mt-1"}," Impede acesso direto Ã s portas da aplicaÃ§Ã£o (ex: localhost:8484) de IPs externos ")],-1))]),s.block_external_access?(n(),i("div",Ie,[t[23]||(t[23]=e("label",{for:"internal_bind_ip",class:"block text-sm font-medium text-text mb-2"}," IP de Bind Interno ",-1)),x(e("select",{id:"internal_bind_ip","onUpdate:modelValue":t[6]||(t[6]=a=>s.internal_bind_ip=a),class:"w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"},[...t[22]||(t[22]=[e("option",{value:"127.0.0.1"},"127.0.0.1 (Localhost apenas)",-1),e("option",{value:"0.0.0.0"},"0.0.0.0 (Todos os IPs)",-1)])],512),[[L,s.internal_bind_ip]]),t[24]||(t[24]=e("p",{class:"mt-1 text-xs text-text-muted"}," 127.0.0.1 = Acesso apenas local | 0.0.0.0 = Acesso de qualquer IP ",-1))])):d("",!0)])])]),e("div",He,[e("div",null,[t[29]||(t[29]=e("h3",{class:"text-lg font-medium text-text mb-4"},"Redirecionamento WWW",-1)),e("div",Ne,[e("div",Ee,[x(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>s.www_redirect=a),id:"www_redirect",type:"checkbox",class:"w-5 h-5 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2 mt-0.5"},null,512),[[y,s.www_redirect]]),t[26]||(t[26]=e("div",null,[e("label",{for:"www_redirect",class:"text-sm font-medium text-text cursor-pointer"}," Ativar Redirecionamento WWW "),e("p",{class:"text-xs text-text-muted mt-1"}," Redireciona entre www.dominio.com e dominio.com ")],-1))]),s.www_redirect?(n(),i("div",Fe,[t[28]||(t[28]=e("label",{for:"www_redirect_type",class:"block text-sm font-medium text-text mb-2"}," Tipo de Redirecionamento ",-1)),x(e("select",{id:"www_redirect_type","onUpdate:modelValue":t[8]||(t[8]=a=>s.www_redirect_type=a),class:"w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"},[...t[27]||(t[27]=[e("option",{value:"www_to_non_www"},"www.dominio.com â†’ dominio.com",-1),e("option",{value:"non_www_to_www"},"dominio.com â†’ www.dominio.com",-1)])],512),[[L,s.www_redirect_type]])])):d("",!0)])])]),s.name?(n(),i("div",Re,[t[31]||(t[31]=e("h3",{class:"text-sm font-medium text-text mb-3"},"Preview do DomÃ­nio",-1)),e("div",Ue,[e("div",ze,[t[30]||(t[30]=e("div",{class:"w-2 h-2 rounded-full bg-accent"},null,-1)),e("span",We,c(s.name),1),s.auto_ssl?(n(),i("span",qe," ðŸ”’ SSL Ativo ")):d("",!0)]),s.description?(n(),i("p",Oe,c(s.description),1)):d("",!0),e("div",Ge,[e("span",null,"Status: "+c(s.is_active?"âœ… Ativo":"âŒ Inativo"),1),e("span",null,"SSL: "+c(s.auto_ssl?"ðŸ”’ Let's Encrypt":"ðŸ”“ Desabilitado"),1),s.force_https?(n(),i("span",Qe,"ðŸ”’ HTTPS ForÃ§ado")):d("",!0),s.block_external_access?(n(),i("span",Je,"ðŸ›¡ï¸ Acesso Protegido")):d("",!0)])])])):d("",!0),e("div",Ke,[b(h,{onClick:C,type:"button",variant:"ghost"},{default:f(()=>[...t[32]||(t[32]=[_(" Cancelar ",-1)])]),_:1}),b(h,{type:"submit",disabled:m.value,class:"bg-accent hover:bg-accent-light"},O({default:f(()=>[_(" "+c(m.value?"Criando...":"Criar DomÃ­nio"),1)]),_:2},[m.value?{name:"icon",fn:f(()=>[t[33]||(t[33]=e("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1))]),key:"0"}:void 0]),1032,["disabled"])])],32)]),_:1})]),b(ke,{"domain-name":s.name,"certificate-id":w.value,"is-visible":v.value,onClose:P,onRetry:B},null,8,["domain-name","certificate-id","is-visible"])]),_:1}))}});export{st as default};
