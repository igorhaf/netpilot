import{p as i,k as u,o,h as m,a as s,c as n,d as a,t as p,m as x}from"./app-CLNEGQ-k.js";import{_ as g}from"./AppLayout.vue_vue_type_script_setup_true_lang-D72v69QN.js";/* empty css            */const f={class:"px-4 py-6 sm:px-0"},v={class:"bg-white shadow rounded-lg"},y={class:"px-4 py-5 sm:p-6"},h={class:"mt-5"},b=["disabled"],w={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_={key:1},k={key:2},S={key:0,class:"mt-6 bg-white shadow rounded-lg"},C={class:"px-4 py-5 sm:p-6"},B={class:"mt-2"},z={class:"bg-gray-50 rounded-md p-4"},T={class:"flex"},A={class:"ml-3"},M={class:"mt-2 text-sm text-green-700"},N={class:"whitespace-pre-wrap"},D={__name:"Sync",setup(V){const l=i(""),e=i(!1);function d(){e.value=!0,l.value="",x.post("/sync",{},{onSuccess:r=>{const t=r.props?.flash?.success,c=r.props?.flash?.error;l.value=t||c||"Sync completed."},onFinish:()=>e.value=!1,preserveScroll:!0,preserveState:!0})}return(r,t)=>(o(),u(g,null,{default:m(()=>[s("div",f,[t[6]||(t[6]=s("div",{class:"mb-8"},[s("h1",{class:"text-2xl font-semibold text-gray-900"},"Sync Configuration"),s("p",{class:"mt-2 text-sm text-gray-600"},"Generate Traefik dynamic config from database and sync proxy settings.")],-1)),s("div",v,[s("div",y,[t[1]||(t[1]=s("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Proxy Synchronization",-1)),t[2]||(t[2]=s("div",{class:"mt-2 max-w-xl text-sm text-gray-500"},[s("p",null,"This will generate YAML configuration files for Traefik based on your current domains, routes, and redirects.")],-1)),s("div",h,[s("button",{onClick:d,disabled:e.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[e.value?(o(),n("svg",w,[...t[0]||(t[0]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):a("",!0),e.value?(o(),n("span",_,"Syncing Configuration...")):(o(),n("span",k,"Run Sync"))],8,b)])])]),l.value?(o(),n("div",S,[s("div",C,[t[5]||(t[5]=s("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Sync Results",-1)),s("div",B,[s("div",z,[s("div",T,[t[4]||(t[4]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),s("div",A,[t[3]||(t[3]=s("h3",{class:"text-sm font-medium text-green-800"},"Configuration Updated",-1)),s("div",M,[s("pre",N,p(l.value),1)])])])])])])])):a("",!0),t[7]||(t[7]=s("div",{class:"mt-6 bg-blue-50 border border-blue-200 rounded-lg"},[s("div",{class:"px-4 py-5 sm:p-6"},[s("h3",{class:"text-lg leading-6 font-medium text-blue-900"},"Next Steps"),s("div",{class:"mt-2 text-sm text-blue-700"},[s("p",null,"After syncing, Traefik will automatically reload the configuration. You can monitor the process with:"),s("code",{class:"mt-2 block bg-blue-100 px-3 py-2 rounded text-blue-800"},"./vendor/bin/sail artisan proxy:logs --follow")])])],-1))])]),_:1}))}};export{D as default};
