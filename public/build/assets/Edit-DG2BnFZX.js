import{m as P,d as T,y as h,e as C,p as U,o as a,j as p,a as e,f,k as l,w as q,g as u,c as i,b as c,n as m,F as E,r as H,t as d,A as v,v as b,i as j,z as B,q as y}from"./app-v6LMgA3I.js";import{_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-okXDLQlQ.js";import{a as _,_ as z}from"./Card.vue_vue_type_script_setup_true_lang-CCLiln8U.js";import{u as D}from"./useToast-CYZclKNH.js";/* empty css            */const N={class:"p-6"},A={class:"mb-8"},F={class:"flex items-center gap-3 mb-4"},O=["value"],$={key:0,class:"mt-2 text-sm text-danger"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},G={key:0,class:"mt-2 text-sm text-danger"},I={key:0,class:"mt-2 text-sm text-danger"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},K={key:0,class:"mt-2 text-sm text-danger"},Q={key:0,class:"mt-2 text-sm text-danger"},W={key:0,class:"mt-2 text-sm text-danger"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={key:0,class:"mt-2 text-sm text-danger"},Z={class:"flex items-center gap-2"},tt={class:"flex justify-end gap-3 pt-6 border-t border-border"},lt=P({__name:"Edit",props:{proxyRule:{},domains:{}},setup(R){const n=R,{success:S,error:k}=D(),x=T(!1),s=h({domain_id:n.proxyRule.domain_id,source_host:n.proxyRule.source_host,source_port:n.proxyRule.source_port,target_host:n.proxyRule.target_host,target_port:n.proxyRule.target_port,protocol:n.proxyRule.protocol,priority:n.proxyRule.priority,is_active:n.proxyRule.is_active}),o=h({domain_id:"",source_host:"",source_port:"",target_host:"",target_port:"",protocol:"",priority:""}),w=()=>{y.visit("/proxy")},V=async()=>{x.value=!0;try{await y.post(`/proxy/${n.proxyRule.id}`,{_method:"PUT",...s},{preserveState:!1,preserveScroll:!1,onSuccess:()=>{S("Regra de proxy atualizada com sucesso!"),y.visit("/proxy")},onError:g=>{Object.keys(o).forEach(t=>{o[t]=""}),Object.keys(g).forEach(t=>{t in o&&(o[t]=g[t])}),k("Por favor, corrija os erros no formulário")},onFinish:()=>{x.value=!1}})}catch{k("Erro ao atualizar regra de proxy"),x.value=!1}};return C(()=>{}),(g,t)=>(a(),U(M,{title:"Editar Regra de Proxy"},{default:p(()=>[e("div",N,[e("div",A,[e("div",F,[f(_,{onClick:w,variant:"ghost",size:"sm"},{icon:p(()=>[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:p(()=>[t[9]||(t[9]=l(" Voltar ",-1))]),_:1}),t[10]||(t[10]=e("h1",{class:"text-2xl font-bold text-text"},"Editar Regra de Proxy",-1))]),t[11]||(t[11]=e("p",{class:"text-sm text-text-muted"}," Edite a configuração da regra de redirecionamento de proxy reverso ",-1))]),f(z,{class:"max-w-4xl"},{default:p(()=>[e("form",{onSubmit:q(V,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[t[13]||(t[13]=e("label",{for:"domain_id",class:"block text-sm font-medium text-text mb-2"},[l(" Domínio "),e("span",{class:"text-danger"},"*")],-1)),u(e("select",{id:"domain_id","onUpdate:modelValue":t[0]||(t[0]=r=>s.domain_id=r),required:"",class:m(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":o.domain_id}])},[t[12]||(t[12]=e("option",{value:""},"Selecione um domínio",-1)),(a(!0),i(E,null,H(g.domains,r=>(a(),i("option",{key:r.id,value:r.id},d(r.name)+" - "+d(r.description),9,O))),128))],2),[[v,s.domain_id]]),o.domain_id?(a(),i("p",$,d(o.domain_id),1)):c("",!0)]),e("div",L,[e("div",null,[t[14]||(t[14]=e("label",{for:"source_host",class:"block text-sm font-medium text-text mb-2"},[l(" Host de Origem "),e("span",{class:"text-danger"},"*")],-1)),u(e("input",{id:"source_host","onUpdate:modelValue":t[1]||(t[1]=r=>s.source_host=r),type:"text",required:"",placeholder:"exemplo.com",class:m(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":o.source_host}])},null,2),[[b,s.source_host]]),o.source_host?(a(),i("p",G,d(o.source_host),1)):c("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{for:"source_port",class:"block text-sm font-medium text-text mb-2"},[l(" Porta de Origem "),e("span",{class:"text-danger"},"*")],-1)),u(e("select",{id:"source_port","onUpdate:modelValue":t[2]||(t[2]=r=>s.source_port=r),required:"",class:m(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":o.source_port}])},[...t[15]||(t[15]=[e("option",{value:"80"},"80 (HTTP)",-1),e("option",{value:"443"},"443 (HTTPS)",-1),e("option",{value:"8080"},"8080",-1),e("option",{value:"3000"},"3000",-1),e("option",{value:"9000"},"9000",-1)])],2),[[v,s.source_port]]),o.source_port?(a(),i("p",I,d(o.source_port),1)):c("",!0)])]),e("div",J,[e("div",null,[t[17]||(t[17]=e("label",{for:"target_host",class:"block text-sm font-medium text-text mb-2"},[l(" Host de Destino "),e("span",{class:"text-danger"},"*")],-1)),u(e("input",{id:"target_host","onUpdate:modelValue":t[3]||(t[3]=r=>s.target_host=r),type:"text",required:"",placeholder:"localhost",class:m(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":o.target_host}])},null,2),[[b,s.target_host]]),o.target_host?(a(),i("p",K,d(o.target_host),1)):c("",!0)]),e("div",null,[t[18]||(t[18]=e("label",{for:"target_port",class:"block text-sm font-medium text-text mb-2"},[l(" Porta de Destino "),e("span",{class:"text-danger"},"*")],-1)),u(e("input",{id:"target_port","onUpdate:modelValue":t[4]||(t[4]=r=>s.target_port=r),type:"text",required:"",placeholder:"3000",class:m(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":o.target_port}])},null,2),[[b,s.target_port]]),o.target_port?(a(),i("p",Q,d(o.target_port),1)):c("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{for:"protocol",class:"block text-sm font-medium text-text mb-2"},[l(" Protocolo "),e("span",{class:"text-danger"},"*")],-1)),u(e("select",{id:"protocol","onUpdate:modelValue":t[5]||(t[5]=r=>s.protocol=r),required:"",class:m(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":o.protocol}])},[...t[19]||(t[19]=[e("option",{value:"http"},"HTTP",-1),e("option",{value:"https"},"HTTPS",-1)])],2),[[v,s.protocol]]),o.protocol?(a(),i("p",W,d(o.protocol),1)):c("",!0)])]),e("div",X,[e("div",null,[t[21]||(t[21]=e("label",{for:"priority",class:"block text-sm font-medium text-text mb-2"},[l(" Prioridade "),e("span",{class:"text-danger"},"*")],-1)),u(e("input",{id:"priority","onUpdate:modelValue":t[6]||(t[6]=r=>s.priority=r),type:"number",min:"1",max:"1000",required:"",class:m(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":o.priority}])},null,2),[[b,s.priority]]),t[22]||(t[22]=e("p",{class:"mt-1 text-xs text-text-muted"},"Regras com prioridade maior são processadas primeiro",-1)),o.priority?(a(),i("p",Y,d(o.priority),1)):c("",!0)]),e("div",null,[e("label",Z,[u(e("input",{id:"is_active","onUpdate:modelValue":t[7]||(t[7]=r=>s.is_active=r),type:"checkbox",class:"w-4 h-4 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2"},null,512),[[j,s.is_active]]),t[23]||(t[23]=e("span",{class:"text-sm font-medium text-text"},"Regra Ativa",-1))]),t[24]||(t[24]=e("p",{class:"mt-1 text-xs text-text-muted"},"Regras inativas não são aplicadas ao Nginx",-1))])]),e("div",tt,[f(_,{onClick:w,variant:"ghost"},{default:p(()=>[...t[25]||(t[25]=[l(" Cancelar ",-1)])]),_:1}),f(_,{type:"submit",disabled:x.value,class:"bg-accent hover:bg-accent-light"},B({default:p(()=>[l(" "+d(x.value?"Salvando...":"Salvar Alterações"),1)]),_:2},[x.value?{name:"icon",fn:p(()=>[t[26]||(t[26]=e("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1))]),key:"0"}:void 0]),1032,["disabled"])])],32)]),_:1})])]),_:1}))}});export{lt as default};
