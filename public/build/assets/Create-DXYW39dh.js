import{y as T,d as P,s as U,p as E,o as i,j as u,a as e,f as d,w as A,g as a,c as l,b as f,n as c,F as y,r as h,t as n,A as b,i as x,k as _,q as C}from"./app-CzLamoS7.js";import{_ as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-ChppVuvQ.js";import{_ as q,a as w}from"./Button-BFAknwbt.js";import{_ as m}from"./Input-qWlr2s8g.js";/* empty css            */const H={class:"px-4 py-6 sm:px-0"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O=["value"],N={key:0,class:"mt-2 text-sm text-red-600"},M=["value"],R={key:0,class:"mt-2 text-sm text-red-600"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},L={key:0,class:"mt-2 text-sm text-red-600"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},j={class:"space-y-4"},F={class:"flex items-start space-x-3 p-4 bg-green-50 rounded-lg border border-green-200"},G={class:"flex items-center h-5"},I={class:"flex items-start space-x-3 p-4 bg-blue-50 rounded-lg border border-blue-200"},z={class:"flex items-center h-5"},K={class:"flex items-start space-x-3 p-4 bg-yellow-50 rounded-lg border border-yellow-200"},J={class:"flex items-center h-5"},Q={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},te={__name:"Create",props:{domains:{type:Array,required:!0},upstreams:{type:Array,required:!0},errors:{type:Object,default:()=>({})}},setup(s){const v=s,o=T({domain_id:"",upstream_id:"",path_pattern:"",http_method:"*",priority:100,timeout:30,description:"",is_active:!0,preserve_host:!0,strip_prefix:!1}),p=P(!1),V=U(()=>o.domain_id?v.upstreams.filter(g=>g.domain_id==o.domain_id):v.upstreams),k=()=>{p.value=!0,C.post("/routes",o,{onFinish:()=>p.value=!1})};return(g,t)=>(i(),E(S,null,{default:u(()=>[e("div",H,[t[21]||(t[21]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Add Route"),e("p",{class:"mt-2 text-sm text-gray-600"},"Create a new routing rule to direct traffic to backend services.")],-1)),d(q,{class:"max-w-2xl"},{default:u(()=>[e("form",{onSubmit:A(k,["prevent"]),class:"space-y-6"},[e("div",D,[e("div",null,[t[11]||(t[11]=e("label",{for:"domain_id",class:"block text-sm font-medium text-gray-700 mb-2"},"Domain",-1)),a(e("select",{id:"domain_id","onUpdate:modelValue":t[0]||(t[0]=r=>o.domain_id=r),required:"",class:c(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors duration-200",{"border-red-300":s.errors.domain_id}])},[t[10]||(t[10]=e("option",{value:""},"Select a domain",-1)),(i(!0),l(y,null,h(s.domains,r=>(i(),l("option",{key:r.id,value:r.id},n(r.name),9,O))),128))],2),[[b,o.domain_id]]),s.errors.domain_id?(i(),l("p",N,n(s.errors.domain_id),1)):f("",!0)]),e("div",null,[t[13]||(t[13]=e("label",{for:"upstream_id",class:"block text-sm font-medium text-gray-700 mb-2"},"Upstream",-1)),a(e("select",{id:"upstream_id","onUpdate:modelValue":t[1]||(t[1]=r=>o.upstream_id=r),required:"",class:c(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors duration-200",{"border-red-300":s.errors.upstream_id}])},[t[12]||(t[12]=e("option",{value:""},"Select an upstream",-1)),(i(!0),l(y,null,h(V.value,r=>(i(),l("option",{key:r.id,value:r.id},n(r.name),9,M))),128))],2),[[b,o.upstream_id]]),s.errors.upstream_id?(i(),l("p",R,n(s.errors.upstream_id),1)):f("",!0)])]),d(m,{id:"path_pattern",modelValue:o.path_pattern,"onUpdate:modelValue":t[2]||(t[2]=r=>o.path_pattern=r),label:"Path Pattern",type:"text",placeholder:"/api/v1/*",required:"",error:s.errors.path_pattern,help:"URL path pattern to match (supports wildcards like /api/*, /users/{id})"},null,8,["modelValue","error"]),e("div",B,[e("div",null,[t[15]||(t[15]=e("label",{for:"http_method",class:"block text-sm font-medium text-gray-700 mb-2"},"HTTP Method",-1)),a(e("select",{id:"http_method","onUpdate:modelValue":t[3]||(t[3]=r=>o.http_method=r),required:"",class:c(["block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm transition-colors duration-200",{"border-red-300":s.errors.http_method}])},[...t[14]||(t[14]=[e("option",{value:"*"},"* (All Methods)",-1),e("option",{value:"GET"},"GET",-1),e("option",{value:"POST"},"POST",-1),e("option",{value:"PUT"},"PUT",-1),e("option",{value:"PATCH"},"PATCH",-1),e("option",{value:"DELETE"},"DELETE",-1),e("option",{value:"HEAD"},"HEAD",-1),e("option",{value:"OPTIONS"},"OPTIONS",-1)])],2),[[b,o.http_method]]),s.errors.http_method?(i(),l("p",L,n(s.errors.http_method),1)):f("",!0)]),d(m,{id:"priority",modelValue:o.priority,"onUpdate:modelValue":t[4]||(t[4]=r=>o.priority=r),label:"Priority",type:"number",min:"1",max:"1000",error:s.errors.priority,help:"Higher numbers = higher priority (1-1000)"},null,8,["modelValue","error"])]),e("div",$,[d(m,{id:"timeout",modelValue:o.timeout,"onUpdate:modelValue":t[5]||(t[5]=r=>o.timeout=r),label:"Timeout (seconds)",type:"number",min:"1",max:"300",error:s.errors.timeout,help:"Request timeout in seconds (1-300)"},null,8,["modelValue","error"])]),d(m,{id:"description",modelValue:o.description,"onUpdate:modelValue":t[6]||(t[6]=r=>o.description=r),label:"Description",type:"textarea",placeholder:"Optional description for this route",error:s.errors.description,help:"Add a description to help identify this route's purpose",rows:3},null,8,["modelValue","error"]),e("div",j,[e("div",F,[e("div",G,[a(e("input",{id:"is_active","onUpdate:modelValue":t[7]||(t[7]=r=>o.is_active=r),type:"checkbox",class:"focus:ring-green-500 h-4 w-4 text-green-600 border-gray-300 rounded transition-colors duration-200"},null,512),[[x,o.is_active]])]),t[16]||(t[16]=e("div",{class:"text-sm"},[e("label",{for:"is_active",class:"font-medium text-green-900"},"Active"),e("p",{class:"text-green-700"},"Enable this route in the proxy configuration")],-1))]),e("div",I,[e("div",z,[a(e("input",{id:"preserve_host","onUpdate:modelValue":t[8]||(t[8]=r=>o.preserve_host=r),type:"checkbox",class:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded transition-colors duration-200"},null,512),[[x,o.preserve_host]])]),t[17]||(t[17]=e("div",{class:"text-sm"},[e("label",{for:"preserve_host",class:"font-medium text-blue-900"},"Preserve Host Header"),e("p",{class:"text-blue-700"},"Keep the original Host header when forwarding requests")],-1))]),e("div",K,[e("div",J,[a(e("input",{id:"strip_prefix","onUpdate:modelValue":t[9]||(t[9]=r=>o.strip_prefix=r),type:"checkbox",class:"focus:ring-yellow-500 h-4 w-4 text-yellow-600 border-gray-300 rounded transition-colors duration-200"},null,512),[[x,o.strip_prefix]])]),t[18]||(t[18]=e("div",{class:"text-sm"},[e("label",{for:"strip_prefix",class:"font-medium text-yellow-900"},"Strip Path Prefix"),e("p",{class:"text-yellow-700"},"Remove the matched path prefix before forwarding to upstream")],-1))])]),e("div",Q,[d(w,{href:"/routes",variant:"outline"},{default:u(()=>[...t[19]||(t[19]=[_(" Cancel ",-1)])]),_:1}),d(w,{type:"submit",loading:p.value,variant:"primary"},{default:u(()=>[...t[20]||(t[20]=[_(" Create Route ",-1)])]),_:1},8,["loading"])])],32)]),_:1})])]),_:1}))}};export{te as default};
