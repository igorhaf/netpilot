import{j as A,p as f,q as S,s as I,c as a,d as v,o as n,a as e,t as l,n as h,x as H,F as U,r as O,k as E,g,h as p,i as b,y as L,w as R,b as C,v as T,f as N,z as q,m as $}from"./app-CLNEGQ-k.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-D72v69QN.js";import{a as k,_ as Q}from"./Card.vue_vue_type_script_setup_true_lang-Db32ypDC.js";import{u as J}from"./useToast-DbBWuvX1.js";/* empty css            */const K={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},W={class:"bg-surface rounded-lg shadow-xl max-w-md w-full mx-4"},X={class:"p-6 border-b border-border"},Y={class:"flex items-center gap-3"},Z={class:"w-8 h-8 bg-accent/10 rounded-full flex items-center justify-center"},ee={key:0,class:"w-5 h-5 text-accent animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={key:1,class:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se={key:2,class:"w-5 h-5 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oe={key:3,class:"w-5 h-5 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ie={class:"text-sm text-text-muted"},ne={class:"p-6"},ae={class:"space-y-4"},re={class:"flex items-center gap-3"},le={class:"flex-1"},de={class:"flex items-center justify-between mb-2"},ce={class:"w-full bg-elevated rounded-full h-2"},ue={class:"space-y-2"},me={class:"w-4 h-4 flex items-center justify-center"},pe={key:0,class:"w-2 h-2 bg-success rounded-full"},ve={key:1,class:"w-2 h-2 bg-accent rounded-full animate-pulse"},xe={key:2,class:"w-2 h-2 bg-border rounded-full"},fe={key:0,class:"p-3 bg-danger/10 border border-danger/20 rounded-lg"},ge={class:"text-sm text-danger"},be={key:1,class:"p-3 bg-success/10 border border-success/20 rounded-lg"},_e={class:"text-sm text-success"},he={class:"p-6 border-t border-border flex justify-end gap-3"},ke=A({__name:"SslProgressMonitor",props:{domainName:{},certificateId:{},isVisible:{type:Boolean}},emits:["close","retry"],setup(B,{emit:D}){const y=B,c=D,s=f("pending"),x=f(""),_=f(""),o=f([{id:1,text:"Validando dom√≠nio",status:"pending"},{id:2,text:"Gerando chave privada",status:"pending"},{id:3,text:"Solicitando certificado",status:"pending"},{id:4,text:"Instalando certificado",status:"pending"}]),w=S(()=>{switch(s.value){case"pending":return"Aguardando...";case"processing":return"Processando...";case"valid":return"Conclu√≠do";case"failed":return"Falhou";default:return"Desconhecido"}}),M=S(()=>{switch(s.value){case"processing":return"text-accent";case"valid":return"text-success";case"failed":return"text-danger";default:return"text-text-muted"}}),j=S(()=>{switch(s.value){case"processing":return"bg-accent";case"valid":return"bg-success";case"failed":return"bg-danger";default:return"bg-border"}}),V=S(()=>{const d=o.value.filter(i=>i.status==="completed").length;return s.value==="valid"?100:s.value==="failed"?Math.max(25,d/o.value.length*100):d/o.value.length*100}),r=(d,i)=>{const m=o.value.find(P=>P.id===d);m&&(m.status=i)},t=()=>{s.value="processing",r(1,"processing"),setTimeout(()=>{r(1,"completed"),r(2,"processing"),setTimeout(()=>{r(2,"completed"),r(3,"processing"),setTimeout(()=>{r(3,"completed"),r(4,"processing"),setTimeout(()=>{r(4,"completed"),s.value="valid",_.value=new Date(Date.now()+2160*60*60*1e3).toISOString()},1e3)},1500)},1e3)},1e3)},u=d=>{if(!d)return"";const i=new Date(d);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(i)},z=()=>{c("close")},F=()=>{s.value="pending",x.value="",o.value.forEach(d=>d.status="pending"),c("retry"),t()};return I(()=>{y.isVisible&&setTimeout(()=>{t()},500)}),(d,i)=>d.isVisible?(n(),a("div",K,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[s.value==="processing"?(n(),a("svg",ee,[...i[0]||(i[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):s.value==="valid"?(n(),a("svg",te,[...i[1]||(i[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):s.value==="failed"?(n(),a("svg",se,[...i[2]||(i[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(n(),a("svg",oe,[...i[3]||(i[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"},null,-1)])]))]),e("div",null,[i[4]||(i[4]=e("h3",{class:"text-lg font-medium text-text"},"Certificado SSL",-1)),e("p",ie,l(d.domainName),1)])])]),e("div",ne,[e("div",ae,[e("div",re,[e("div",le,[e("div",de,[i[5]||(i[5]=e("span",{class:"text-sm font-medium text-text"},"Status",-1)),e("span",{class:h(["text-sm",M.value])},l(w.value),3)]),e("div",ce,[e("div",{class:h(["h-2 rounded-full transition-all duration-500",j.value]),style:H({width:V.value+"%"})},null,6)])])]),e("div",ue,[(n(!0),a(U,null,O(o.value,m=>(n(),a("div",{key:m.id,class:"flex items-center gap-3 text-sm"},[e("div",me,[m.status==="completed"?(n(),a("div",pe)):m.status==="processing"?(n(),a("div",ve)):(n(),a("div",xe))]),e("span",{class:h(m.status==="completed"?"text-success":m.status==="processing"?"text-accent":"text-text-muted")},l(m.text),3)]))),128))]),s.value==="failed"&&x.value?(n(),a("div",fe,[e("p",ge,l(x.value),1)])):v("",!0),s.value==="valid"?(n(),a("div",be,[e("p",_e," üéâ Certificado SSL criado com sucesso! V√°lido at√© "+l(u(_.value)),1)])):v("",!0)])]),e("div",he,[s.value==="failed"?(n(),E(k,{key:0,onClick:F,variant:"outline"},{default:p(()=>[...i[6]||(i[6]=[b(" Tentar Novamente ",-1)])]),_:1})):v("",!0),g(k,{onClick:z,variant:s.value==="valid"?"default":"ghost"},{default:p(()=>[b(l(s.value==="valid"?"Conclu√≠do":"Fechar"),1)]),_:1},8,["variant"])])])])):v("",!0)}}),ye={class:"p-6"},we={class:"mb-8"},Se={class:"flex items-center gap-3 mb-4"},Ce={key:0,class:"mt-2 text-sm text-danger"},$e={key:0,class:"mt-2 text-sm text-danger"},De={class:"space-y-6"},Me={class:"space-y-4"},je={class:"flex items-start gap-3"},Ve={class:"flex items-start gap-3"},Be={key:0,class:"p-4 bg-elevated/50 rounded-lg border border-border"},Le={class:"space-y-2"},Te={class:"flex items-center gap-2"},Ne={class:"text-sm font-medium text-text"},Ae={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-success/10 text-success"},Ee={key:0,class:"text-sm text-text-muted pl-4"},ze={class:"flex items-center gap-4 text-xs text-text-muted pl-4"},Fe={class:"flex items-center justify-end gap-3 pt-6 border-t border-border"},Re=A({__name:"Create",setup(B){const{success:D,error:y}=J(),c=f(!1),s=L({}),x=f(!1),_=f(),o=L({name:"",description:"",is_active:!0,auto_ssl:!0}),w=()=>{$.visit("/domains")},M=async()=>{c.value=!0,Object.keys(s).forEach(r=>delete s[r]);try{await $.post("/domains",o,{onSuccess:r=>{D("Dom√≠nio criado com sucesso!"),o.auto_ssl?(x.value=!0,_.value=Math.floor(Math.random()*1e3)):setTimeout(()=>{$.visit("/domains")},1e3)},onError:r=>{Object.keys(r).forEach(t=>{s[t]=r[t]}),y("Erro ao criar dom√≠nio")},onFinish:()=>{c.value=!1}})}catch{y("Erro ao criar dom√≠nio"),c.value=!1}},j=()=>{x.value=!1,setTimeout(()=>{$.visit("/domains")},500)},V=()=>{console.log("Retrying SSL certificate creation for domain:",o.name)};return(r,t)=>(n(),E(G,{title:"Novo Dom√≠nio"},{default:p(()=>[e("div",ye,[e("div",we,[e("div",Se,[g(k,{onClick:w,variant:"ghost",size:"sm"},{icon:p(()=>[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:p(()=>[t[5]||(t[5]=b(" Voltar ",-1))]),_:1}),t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-text"},"Novo Dom√≠nio",-1))]),t[7]||(t[7]=e("p",{class:"text-sm text-text-muted"}," Adicione um dom√≠nio para gerenciar redirects e certificados SSL autom√°ticos ",-1))]),g(Q,{class:"max-w-4xl"},{default:p(()=>[e("form",{onSubmit:R(M,["prevent"]),class:"p-6 space-y-6"},[e("div",null,[t[8]||(t[8]=e("label",{for:"name",class:"block text-sm font-medium text-text mb-2"},[b(" Nome do Dom√≠nio "),e("span",{class:"text-danger"},"*")],-1)),C(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=u=>o.name=u),type:"text",required:"",placeholder:"exemplo.com",class:h(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.name}])},null,2),[[T,o.name]]),t[9]||(t[9]=e("p",{class:"mt-1 text-xs text-text-muted"},"Nome do dom√≠nio (ex: exemplo.com, www.exemplo.com)",-1)),s.name?(n(),a("p",Ce,l(s.name),1)):v("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{for:"description",class:"block text-sm font-medium text-text mb-2"}," Descri√ß√£o ",-1)),C(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=u=>o.description=u),rows:"3",placeholder:"Descri√ß√£o do dom√≠nio e sua finalidade...",class:h(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.description}])},null,2),[[T,o.description]]),t[11]||(t[11]=e("p",{class:"mt-1 text-xs text-text-muted"},"Descri√ß√£o opcional para identificar o dom√≠nio",-1)),s.description?(n(),a("p",$e,l(s.description),1)):v("",!0)]),e("div",De,[e("div",null,[t[14]||(t[14]=e("h3",{class:"text-lg font-medium text-text mb-4"},"Configura√ß√µes do Dom√≠nio",-1)),e("div",Me,[e("div",je,[C(e("input",{"onUpdate:modelValue":t[2]||(t[2]=u=>o.is_active=u),id:"is_active",type:"checkbox",class:"w-5 h-5 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2 mt-0.5"},null,512),[[N,o.is_active]]),t[12]||(t[12]=e("div",null,[e("label",{for:"is_active",class:"text-sm font-medium text-text cursor-pointer"}," Ativar Dom√≠nio "),e("p",{class:"text-xs text-text-muted mt-1"}," Quando ativo, o dom√≠nio ficar√° dispon√≠vel para receber tr√°fego e configurar redirects ")],-1))]),e("div",Ve,[C(e("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>o.auto_ssl=u),id:"auto_ssl",type:"checkbox",class:"w-5 h-5 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2 mt-0.5"},null,512),[[N,o.auto_ssl]]),t[13]||(t[13]=e("div",null,[e("label",{for:"auto_ssl",class:"text-sm font-medium text-text cursor-pointer"}," SSL Autom√°tico (Let's Encrypt) "),e("p",{class:"text-xs text-text-muted mt-1"}," Gerar e renovar automaticamente certificados SSL gratuitos via Let's Encrypt ")],-1))])])])]),o.name?(n(),a("div",Be,[t[16]||(t[16]=e("h3",{class:"text-sm font-medium text-text mb-3"},"Preview do Dom√≠nio",-1)),e("div",Le,[e("div",Te,[t[15]||(t[15]=e("div",{class:"w-2 h-2 rounded-full bg-accent"},null,-1)),e("span",Ne,l(o.name),1),o.auto_ssl?(n(),a("span",Ae," üîí SSL Ativo ")):v("",!0)]),o.description?(n(),a("p",Ee,l(o.description),1)):v("",!0),e("div",ze,[e("span",null,"Status: "+l(o.is_active?"‚úÖ Ativo":"‚ùå Inativo"),1),e("span",null,"SSL: "+l(o.auto_ssl?"üîí Let's Encrypt":"üîì Desabilitado"),1)])])])):v("",!0),e("div",Fe,[g(k,{onClick:w,type:"button",variant:"ghost"},{default:p(()=>[...t[17]||(t[17]=[b(" Cancelar ",-1)])]),_:1}),g(k,{type:"submit",disabled:c.value,class:"bg-accent hover:bg-accent-light"},q({default:p(()=>[b(" "+l(c.value?"Criando...":"Criar Dom√≠nio"),1)]),_:2},[c.value?{name:"icon",fn:p(()=>[t[18]||(t[18]=e("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1))]),key:"0"}:void 0]),1032,["disabled"])])],32)]),_:1})]),g(ke,{"domain-name":o.name,"certificate-id":_.value,"is-visible":x.value,onClose:j,onRetry:V},null,8,["domain-name","certificate-id","is-visible"])]),_:1}))}});export{Re as default};
