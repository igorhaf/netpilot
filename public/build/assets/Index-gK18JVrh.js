import{m as z,d as f,s as k,e as j,p as b,o as d,j as a,f as l,a as e,k as i,g as x,v as E,z as C,c as p,t as n,b as A,F as N,r as S,q as m}from"./app-euG18NoH.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dd9PRnpj.js";import{_ as U}from"./PageLayout.vue_vue_type_script_setup_true_lang-BW3yTfll.js";import{a as u,_ as B}from"./Card.vue_vue_type_script_setup_true_lang-DyaH9hgk.js";import{_ as L}from"./Badge.vue_vue_type_script_setup_true_lang-DE_4CD6e.js";import{T as F}from"./Table-b3WxwXfT.js";import{t as v}from"./useToast-C67PMpDe.js";/* empty css            */const P={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},I={class:"flex flex-col md:flex-row gap-4"},O={class:"flex-1"},q={class:"relative rounded-lg"},H={class:"flex flex-col sm:flex-row gap-4"},G={class:"w-full sm:w-40"},J={class:"w-full sm:w-40"},K={key:0,class:"py-12 flex justify-center"},Q={key:1,class:"py-12 flex justify-center"},W={class:"flex flex-col items-center text-center"},X={class:"text-text-muted max-w-md"},Y={class:"mt-4 flex space-x-3"},Z={key:2},ee={class:"px-4 py-4"},te={class:"flex items-center"},se={class:"font-medium"},oe={class:"px-4 py-4"},re={class:"bg-surface px-2 py-1 rounded text-sm"},ae={class:"px-4 py-4"},le=["href"],ie={class:"px-4 py-4"},ne={class:"px-4 py-4"},de={class:"text-sm"},ue={class:"px-4 py-4"},ce={class:"px-4 py-4 text-right space-x-2 whitespace-nowrap"},he=z({__name:"Index",props:{redirects:{},stats:{}},setup(T){const c=f(T.redirects),w=f(!1),o=f({search:"",type:"",status:""}),g=k(()=>c.value.data.filter(r=>!(o.value.search&&!r.domain.name.toLowerCase().includes(o.value.search.toLowerCase())&&!r.source_pattern.toLowerCase().includes(o.value.search.toLowerCase())&&!r.target_url.toLowerCase().includes(o.value.search.toLowerCase())||o.value.type&&r.redirect_type.toString()!==o.value.type||o.value.status==="active"&&!r.is_active||o.value.status==="inactive"&&r.is_active))),y=k(()=>o.value.search!==""||o.value.type!==""||o.value.status!==""),_=()=>{o.value={search:"",type:"",status:""}},h=()=>{m.visit("/redirects/create")},M=r=>{m.visit(`/redirects/${r.id}/edit`)},R=r=>{confirm(`Tem certeza que deseja excluir o redirect ${r.source_pattern}?`)&&V(r.id)},V=async r=>{try{await m.delete(`/redirects/${r}`,{onSuccess:()=>{c.value.data=c.value.data.filter(t=>t.id!==r),c.value.total&&c.value.total--,v.success("Redirect excluído","O redirect foi excluído com sucesso.")},onError:t=>{v.error("Erro ao excluir","Não foi possível excluir o redirect."),console.error("Erro ao excluir redirect:",t)}})}catch(t){v.error("Erro ao excluir","Ocorreu um erro inesperado."),console.error("Erro inesperado:",t)}};return j(()=>{w.value=!1}),(r,t)=>(d(),b(D,{title:"Redirects"},{default:a(()=>[l(U,null,{default:a(()=>[e("div",P,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-2xl font-semibold"},"Redirects"),e("p",{class:"text-text-muted mt-1"},"Gerencie os redirecionamentos de URL do proxy")],-1)),l(u,{onClick:h,variant:"default",class:"sm:self-end"},{icon:a(()=>[...t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)])]),default:a(()=>[t[4]||(t[4]=i(" Adicionar Redirect ",-1))]),_:1})]),l(B,null,{default:a(()=>[e("div",I,[e("div",O,[t[7]||(t[7]=e("label",{for:"search",class:"sr-only"},"Buscar",-1)),e("div",q,[t[6]||(t[6]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-text-muted",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),x(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>o.value.search=s),type:"search",class:"block w-full pl-10 pr-3 py-2 border border-border rounded-lg bg-surface focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent",placeholder:"Buscar redirects..."},null,512),[[E,o.value.search]])])]),e("div",H,[e("div",G,[t[9]||(t[9]=e("label",{for:"type",class:"sr-only"},"Tipo",-1)),x(e("select",{id:"type","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.type=s),class:"block w-full px-3 py-2 border border-border rounded-lg bg-surface focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent text-sm"},[...t[8]||(t[8]=[e("option",{value:""},"Todos os tipos",-1),e("option",{value:"301"},"301 - Permanente",-1),e("option",{value:"302"},"302 - Temporário",-1)])],512),[[C,o.value.type]])]),e("div",J,[t[11]||(t[11]=e("label",{for:"status",class:"sr-only"},"Status",-1)),x(e("select",{id:"status","onUpdate:modelValue":t[2]||(t[2]=s=>o.value.status=s),class:"block w-full px-3 py-2 border border-border rounded-lg bg-surface focus:outline-none focus:ring-1 focus:ring-accent focus:border-accent text-sm"},[...t[10]||(t[10]=[e("option",{value:""},"Todos os status",-1),e("option",{value:"active"},"Ativo",-1),e("option",{value:"inactive"},"Inativo",-1)])],512),[[C,o.value.status]])]),l(u,{variant:"outline",onClick:_},{default:a(()=>[...t[12]||(t[12]=[i(" Limpar ",-1)])]),_:1})])])]),_:1}),l(B,null,{default:a(()=>[w.value?(d(),p("div",K,[...t[13]||(t[13]=[e("div",{class:"flex flex-col items-center"},[e("svg",{class:"animate-spin h-10 w-10 text-accent mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("p",{class:"text-text-muted"},"Carregando redirects...")],-1)])])):g.value.length===0?(d(),p("div",Q,[e("div",W,[t[16]||(t[16]=e("svg",{class:"h-12 w-12 text-text-muted mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7l4-4m0 0l4 4m-4-4v18"})],-1)),t[17]||(t[17]=e("p",{class:"text-text font-medium mb-2"},"Nenhum redirect encontrado",-1)),e("p",X,n(y.value?"Nenhum redirect corresponde aos filtros aplicados.":"Você ainda não tem nenhum redirect cadastrado."),1),e("div",Y,[y.value?(d(),b(u,{key:0,onClick:_,variant:"outline"},{default:a(()=>[...t[14]||(t[14]=[i(" Limpar filtros ",-1)])]),_:1})):A("",!0),l(u,{onClick:h,variant:"default"},{default:a(()=>[...t[15]||(t[15]=[i(" Adicionar Redirect ",-1)])]),_:1})])])])):(d(),p("div",Z,[l(F,{"sticky-header":!0,"col-span":7},{header:a(()=>[...t[18]||(t[18]=[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider"}," Domínio ",-1),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider"}," Padrão Origem ",-1),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider"}," URL Destino ",-1),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider"}," Tipo ",-1),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider"}," Prioridade ",-1),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-text-muted uppercase tracking-wider"}," Status ",-1),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-text-muted uppercase tracking-wider"}," Ações ",-1)])]),default:a(()=>[(d(!0),p(N,null,S(g.value,s=>(d(),p("tr",{key:s.id,class:"hover:bg-elevated"},[e("td",ee,[e("div",te,[t[19]||(t[19]=e("div",{class:"flex-shrink-0 h-8 w-8 bg-surface rounded-lg flex items-center justify-center mr-3"},[e("svg",{class:"h-4 w-4 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7l4-4m0 0l4 4m-4-4v18"})])],-1)),e("span",se,n(s.domain.name),1)])]),e("td",oe,[e("code",re,n(s.source_pattern),1)]),e("td",ae,[e("a",{href:s.target_url,target:"_blank",class:"text-accent hover:underline"},n(s.target_url),9,le)]),e("td",ie,[l(L,{variant:s.redirect_type===301?"warning":"info"},{default:a(()=>[i(n(s.redirect_type)+" "+n(s.redirect_type===301?"Permanente":"Temporário"),1)]),_:2},1032,["variant"])]),e("td",ne,[e("span",de,n(s.priority),1)]),e("td",ue,[l(L,{variant:s.is_active?"success":"danger"},{default:a(()=>[i(n(s.is_active?"Ativo":"Inativo"),1)]),_:2},1032,["variant"])]),e("td",ce,[l(u,{variant:"ghost",size:"sm",onClick:$=>M(s)},{default:a(()=>[...t[20]||(t[20]=[i(" Editar ",-1)])]),_:2},1032,["onClick"]),l(u,{variant:"ghost",size:"sm",class:"text-danger",onClick:$=>R(s)},{default:a(()=>[...t[21]||(t[21]=[i(" Excluir ",-1)])]),_:2},1032,["onClick"])])]))),128))]),_:1})]))]),_:1})]),_:1})]),_:1}))}});export{he as default};
