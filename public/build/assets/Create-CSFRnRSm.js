import{m as S,d as B,y as w,p as j,o as d,j as i,a as t,f as g,k as n,w as q,c as a,b as m,g as u,n as c,F as h,r as C,t as l,A as k,v as b,i as D,z as N,q as V}from"./app-DYmwo6cP.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-D8_QylCB.js";import{a as v,_ as A}from"./Card.vue_vue_type_script_setup_true_lang-CBKiSllb.js";import{u as E}from"./useToast-CQR3QsTO.js";/* empty css            */const O={class:"p-6"},R={class:"mb-8"},F={class:"flex items-center gap-3 mb-4"},$=["value"],L={key:0,class:"mt-2 text-sm text-danger"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={key:0,class:"mt-2 text-sm text-danger"},G={key:0,class:"mt-2 text-sm text-danger"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},K={key:0,class:"mt-2 text-sm text-danger"},Q={key:0,class:"mt-2 text-sm text-danger"},W={key:0,class:"mt-2 text-sm text-danger"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Z={key:0,class:"mt-2 text-sm text-danger"},ee={class:"flex items-center gap-2"},te={class:"space-y-3"},oe=["onUpdate:modelValue"],re=["onUpdate:modelValue"],se={key:0,class:"p-4 bg-elevated/50 rounded-lg border border-border"},le={class:"text-sm text-text-muted space-y-1"},ne={class:"flex items-center justify-end gap-3 pt-6 border-t border-border"},ce=S({__name:"Create",props:{domains:{}},setup(de){const{success:H,error:P}=E(),x=B(!1),s=w({}),r=w({domain_id:"",source_host:"",source_port:"80",target_host:"localhost",target_port:"8080",protocol:"http",priority:100,is_active:!0,headers:[]}),_=()=>{V.visit(route("proxy.index"))},U=()=>{r.headers.push({key:"",value:""})},T=p=>{r.headers.splice(p,1)},M=async()=>{x.value=!0,s.value={};try{const p={};r.headers.forEach(o=>{o.key&&o.value&&(p[o.key]=o.value)});const e={...r,headers:Object.keys(p).length>0?p:null};await V.post(route("proxy.store"),e,{onSuccess:()=>{H("Regra de proxy criada com sucesso!")},onError:o=>{Object.keys(o).forEach(f=>{s[f]=o[f]}),P("Erro ao criar regra de proxy")},onFinish:()=>{x.value=!1}})}catch(p){p("Erro ao criar regra de proxy"),x.value=!1}};return(p,e)=>(d(),j(z,{title:"Nova Regra de Proxy"},{default:i(()=>[t("div",O,[t("div",R,[t("div",F,[g(v,{onClick:_,variant:"ghost",size:"sm"},{icon:i(()=>[...e[8]||(e[8]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),default:i(()=>[e[9]||(e[9]=n(" Voltar ",-1))]),_:1}),e[10]||(e[10]=t("h1",{class:"text-2xl font-bold text-text"},"Nova Regra de Proxy",-1))]),e[11]||(e[11]=t("p",{class:"text-sm text-text-muted"}," Configure uma nova regra de redirecionamento de proxy reverso ",-1))]),g(A,{class:"max-w-4xl"},{default:i(()=>[t("form",{onSubmit:q(M,["prevent"]),class:"p-6 space-y-6"},[t("div",null,[e[13]||(e[13]=t("label",{for:"domain_id",class:"block text-sm font-medium text-text mb-2"},[n(" Domínio "),t("span",{class:"text-danger"},"*")],-1)),u(t("select",{id:"domain_id","onUpdate:modelValue":e[0]||(e[0]=o=>r.domain_id=o),required:"",class:c(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.domain_id}])},[e[12]||(e[12]=t("option",{value:""},"Selecione um domínio",-1)),(d(!0),a(h,null,C(p.domains,o=>(d(),a("option",{key:o.id,value:o.id},l(o.name)+" - "+l(o.description),9,$))),128))],2),[[k,r.domain_id]]),s.domain_id?(d(),a("p",L,l(s.domain_id),1)):m("",!0)]),t("div",I,[t("div",null,[e[14]||(e[14]=t("label",{for:"source_host",class:"block text-sm font-medium text-text mb-2"},[n(" Host de Origem "),t("span",{class:"text-danger"},"*")],-1)),u(t("input",{id:"source_host","onUpdate:modelValue":e[1]||(e[1]=o=>r.source_host=o),type:"text",required:"",placeholder:"exemplo.com",class:c(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.source_host}])},null,2),[[b,r.source_host]]),s.source_host?(d(),a("p",X,l(s.source_host),1)):m("",!0)]),t("div",null,[e[16]||(e[16]=t("label",{for:"source_port",class:"block text-sm font-medium text-text mb-2"},[n(" Porta de Origem "),t("span",{class:"text-danger"},"*")],-1)),u(t("select",{id:"source_port","onUpdate:modelValue":e[2]||(e[2]=o=>r.source_port=o),required:"",class:c(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.source_port}])},[...e[15]||(e[15]=[t("option",{value:"80"},"80 (HTTP)",-1),t("option",{value:"443"},"443 (HTTPS)",-1),t("option",{value:"8080"},"8080",-1),t("option",{value:"3000"},"3000",-1),t("option",{value:"9000"},"9000",-1)])],2),[[k,r.source_port]]),s.source_port?(d(),a("p",G,l(s.source_port),1)):m("",!0)])]),t("div",J,[t("div",null,[e[17]||(e[17]=t("label",{for:"target_host",class:"block text-sm font-medium text-text mb-2"},[n(" Host de Destino "),t("span",{class:"text-danger"},"*")],-1)),u(t("input",{id:"target_host","onUpdate:modelValue":e[3]||(e[3]=o=>r.target_host=o),type:"text",required:"",placeholder:"localhost",class:c(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.target_host}])},null,2),[[b,r.target_host]]),s.target_host?(d(),a("p",K,l(s.target_host),1)):m("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{for:"target_port",class:"block text-sm font-medium text-text mb-2"},[n(" Porta de Destino "),t("span",{class:"text-danger"},"*")],-1)),u(t("input",{id:"target_port","onUpdate:modelValue":e[4]||(e[4]=o=>r.target_port=o),type:"text",required:"",placeholder:"8080",class:c(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.target_port}])},null,2),[[b,r.target_port]]),s.target_port?(d(),a("p",Q,l(s.target_port),1)):m("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{for:"protocol",class:"block text-sm font-medium text-text mb-2"},[n(" Protocolo "),t("span",{class:"text-danger"},"*")],-1)),u(t("select",{id:"protocol","onUpdate:modelValue":e[5]||(e[5]=o=>r.protocol=o),required:"",class:c(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.protocol}])},[...e[19]||(e[19]=[t("option",{value:"http"},"HTTP",-1),t("option",{value:"https"},"HTTPS",-1)])],2),[[k,r.protocol]]),s.protocol?(d(),a("p",W,l(s.protocol),1)):m("",!0)])]),t("div",Y,[t("div",null,[e[21]||(e[21]=t("label",{for:"priority",class:"block text-sm font-medium text-text mb-2"}," Prioridade ",-1)),u(t("input",{id:"priority","onUpdate:modelValue":e[6]||(e[6]=o=>r.priority=o),type:"number",min:"1",max:"1000",placeholder:"100",class:c(["w-full px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent",{"border-danger":s.priority}])},null,2),[[b,r.priority]]),e[22]||(e[22]=t("p",{class:"mt-1 text-xs text-text-muted"},"Menor número = maior prioridade",-1)),s.priority?(d(),a("p",Z,l(s.priority),1)):m("",!0)]),t("div",null,[t("label",ee,[u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>r.is_active=o),type:"checkbox",class:"w-4 h-4 text-accent bg-elevated border-border rounded focus:ring-accent focus:ring-2"},null,512),[[D,r.is_active]]),e[23]||(e[23]=t("span",{class:"text-sm font-medium text-text"},"Ativar regra imediatamente",-1))]),e[24]||(e[24]=t("p",{class:"mt-1 text-xs text-text-muted"},"A regra será aplicada ao Nginx se marcada",-1))])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-text mb-2"}," Headers Customizados ",-1)),t("div",te,[(d(!0),a(h,null,C(r.headers,(o,f)=>(d(),a("div",{key:f,class:"flex gap-3"},[u(t("input",{"onUpdate:modelValue":y=>o.key=y,type:"text",placeholder:"X-Custom-Header",class:"flex-1 px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"},null,8,oe),[[b,o.key]]),u(t("input",{"onUpdate:modelValue":y=>o.value=y,type:"text",placeholder:"Valor do header",class:"flex-1 px-3 py-2 bg-elevated border border-border rounded-lg text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"},null,8,re),[[b,o.value]]),g(v,{onClick:y=>T(f),type:"button",variant:"danger",size:"sm"},{icon:i(()=>[...e[25]||(e[25]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:2},1032,["onClick"])]))),128)),g(v,{onClick:U,type:"button",variant:"outline",size:"sm"},{icon:i(()=>[...e[26]||(e[26]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:i(()=>[e[27]||(e[27]=n(" Adicionar Header ",-1))]),_:1})])]),r.source_host&&r.target_host?(d(),a("div",se,[e[33]||(e[33]=t("h3",{class:"text-sm font-medium text-text mb-2"},"Preview da Regra:",-1)),t("div",le,[t("p",null,[e[29]||(e[29]=t("strong",null,"Origem:",-1)),n(" "+l(r.protocol)+"://"+l(r.source_host)+":"+l(r.source_port),1)]),t("p",null,[e[30]||(e[30]=t("strong",null,"Destino:",-1)),n(" "+l(r.protocol)+"://"+l(r.target_host)+":"+l(r.target_port),1)]),t("p",null,[e[31]||(e[31]=t("strong",null,"Prioridade:",-1)),n(" "+l(r.priority),1)]),t("p",null,[e[32]||(e[32]=t("strong",null,"Status:",-1)),n(" "+l(r.is_active?"Ativa":"Inativa"),1)])])])):m("",!0),t("div",ne,[g(v,{onClick:_,type:"button",variant:"ghost"},{default:i(()=>[...e[34]||(e[34]=[n(" Cancelar ",-1)])]),_:1}),g(v,{type:"submit",disabled:x.value,class:"bg-accent hover:bg-accent-light"},N({default:i(()=>[n(" "+l(x.value?"Criando...":"Criar Regra de Proxy"),1)]),_:2},[x.value?{name:"icon",fn:i(()=>[e[35]||(e[35]=t("svg",{class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1))]),key:"0"}:void 0]),1032,["disabled"])])],32)]),_:1})])]),_:1}))}});export{ce as default};
