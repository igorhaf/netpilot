# Traefik Dynamic Configuration
# Generated at: 2025-10-02T20:27:00.219324
# NetPilot System Operations

http:
  routers:

    # NetPilot Domain - Special routing for API + Frontend
    netpilot-meadadigital-com-api:
      rule: "Host(`netpilot.meadadigital.com`) && PathPrefix(`/api`)"
      service: netpilot-meadadigital-com-api-service
      middlewares: []
      priority: 10
      entryPoints:
        - websecure
      tls:
        certResolver: letsencrypt

    netpilot-meadadigital-com:
      rule: "Host(`netpilot.meadadigital.com`)"
      service: netpilot-meadadigital-com-service
      middlewares: []
      priority: 1
      entryPoints:
        - websecure
      tls:
        certResolver: letsencrypt


    # HTTPS redirect for netpilot.meadadigital.com
    netpilot-meadadigital-com-redirect:
      rule: "Host(`netpilot.meadadigital.com`)"
      middlewares:
        - netpilot-meadadigital-com-redirect-https
      entryPoints:
        - web


    # Regular domain routing

    # HTTPS redirect for api.netpilot.com
    api-netpilot-com-redirect:
      rule: "Host(`api.netpilot.com`)"
      middlewares:
        - api-netpilot-com-redirect-https
      entryPoints:
        - web


    # Regular domain routing

  services:

    # NetPilot services
    netpilot-meadadigital-com-api-service:
      loadBalancer:
        servers:
          - url: http://backend:3001

    netpilot-meadadigital-com-service:
      loadBalancer:
        servers:
          - url: http://frontend:3000


    # Regular domain services

    # Regular domain services

  middlewares:
    netpilot-meadadigital-com-redirect-https:
      redirectScheme:
        scheme: https
        permanent: true
    api-netpilot-com-redirect-https:
      redirectScheme:
        scheme: https
        permanent: true
